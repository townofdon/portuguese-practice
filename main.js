/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/resources/conjugation-ver-vir.yaml":
/*!************************************************!*\
  !*** ./src/resources/conjugation-ver-vir.yaml ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({ver:{present:[{pr:'eu vejo o sol todos os dias',en:'I see the sun every day'},{pr:'ele vê os pássaros voando',en:'he sees the birds flying'},{pr:'nós vemos o mar daqui',en:'we see the sea from here'},{pr:'eles veem os animais na floresta',en:'they see the animals in the forest'}],imperfect:[{pr:'eu via os carros passarem na rua',en:'I used to see the cars passing in the road'},{pr:'ele via os animais na floresta',en:'he used to see the animals in the forest'},{pr:'nós víamos o pôr do sol na praia',en:'we used to see the sunset on the beach'},{pr:'eles viam a lua no céu',en:'they used to see the moon in the sky'}],preterite:[{pr:'eu vi o filme ontem',en:'I saw the film yesterday'},{pr:'ele viu o trem passar',en:'he saw the train pass'},{pr:'nós vimos o mar agitado',en:'we saw the rough sea'},{pr:'eles viram o eclipse da lua',en:'they saw the eclipse of the moon'}],presentPerfect:[{pr:'eu tenho visto muitos filmes bons',en:'I have seen many good films'},{pr:'ele tem visto muitas estrelas à noite',en:'he has seen many stars at night'},{pr:'nós temos visto o pôr do sol juntos',en:'we have seen the sunset together'},{pr:'eles têm visto os fogos de artifício no céu',en:'they have seen the fireworks in the sky'}],future:[{pr:'eu verei o nascer do sol amanhã',en:'I will see the sunrise tomorrow'},{pr:'ele verá os fogos de artifício no reveillon',en:'He will see the fireworks on New Year\'s Eve'},{pr:'nós veremos o mar azul na viagem',en:'we will see the blue sea on the journey'},{pr:'eles verão as flores no jardim',en:'they will see the flowers in the garden'}],presentSubjunctive:[{pr:'você quer que eu **veja** qual é o problema?',en:'do you want me **to see** what the problem is?'},{pr:'você quer que um mechanica **veja** qual é o problema?',en:'do you want a mechanic **to see** what the problem is?'},{pr:'você quer que nós **vejamos** qual é o problema?',en:'do you want us **to see** what the problem is?'},{pr:'você quer que eles **vejam** qual é o problema?',en:'do you want them **to see** what the problem is?'}]},vir:{present:[{pr:'eu venho sempre ao parque',en:'I always come to the park'},{pr:'eu tenho satisfação quando eu venho aqui',en:'I have satisfaction when I come here'},{pr:'ela vem mais tarde',en:'she comes later'},{pr:'nós vimos o filme juntos',en:'we see the film together'},{pr:'eles vêm de longe',en:'they come from afar'}],imperfect:[{pr:'eu vinha ao parque todos os dias',en:'I used to come to the park every day'},{pr:'ele vinha ler aqui à tarde',en:'he used to come read here in the afternoon'},{pr:'nós vinhamos sempre antes do jantar',en:'we used to always come before dinner'},{pr:'eles vinham jogar futebol todas as tardes',en:'they used to come play soccer every afternoon'}],preterite:[{pr:'eu vim à praia hoje',en:'I came to the beach today'},{pr:'ele veio ajudar a avó',en:'he came to help his grandmother'},{pr:'nós viemos almoçar contigo',en:'we came to have lunch with you'},{pr:'eles vieram rápido demais',en:'they came too fast'}],presentPerfect:[{pr:'eu tehno vindo aqui com frequência',en:'I have been coming here often'},{pr:'ele tem vindo ajudar os outros',en:'he has been coming to help others'},{pr:'nós temos vindo passear no parque',en:'we have been coming for a walk in the park'},{pr:'eles têm vindo brincar no parque',en:'they have been coming to play in the park'}],future:[{pr:'eu virei buscar você mais tarde',en:'I will come find you later'},{pr:'ele virá ajudar na festa',en:'he will come help at the party'},{pr:'nós viremos jantar juntos',en:'we will come to dinner together'},{pr:'eles virão no próximo final de semana',en:'they will come next weekend'}],presentSubjunctive:[{pr:'É melhor que eu **venha** mais cedo amanhã',en:'It is better that I **come** earlier tomorrow \\n _(I better come early tomorrow)_'},{pr:'É melhor que você **venha** mais cedo amanhã',en:'It is better that you **come** earlier tomorrow \\n _(You better come early tomorrow)_'},{pr:'É melhor que **venhamos** mais cedo amanhã',en:'It is better that we **come** earlier tomorrow \\n _(We better come early tomorrow)_'},{pr:'É melhor que eles **venham** mais cedo amanhã',en:'It is better that they **come** earlier tomorrow \\n _(They better come early tomorrow)_'}]},ver_and_vir:{present:[{pr:'sempre que eu **venho** ao jardim, **vejo** muitas flores',en:'when I **come** to the garden, I always **see** many flowers'},{pr:'sempre que ele **vem** ao parque, **vê** alguns passaros',en:'when he **comes** to the park, he always **sees** some birds'},{pr:'sempre que nós **vimos** a praia, **vemos** crianças brincando',en:'when we **come** to the beach, we always **see** kids playing'},{pr:'sempre que elas **vêm** a favela, **veem** alguns cachorros brincando',en:'when they **come** to the favela, they always **see** some dogs playing'}],imperfect:[{pr:'Antigamente, quando eu **vinha** ao parque, **via** mais famílias fazendo piquenique',en:'In the past, when I **came** to the park, I **saw** more families having picnics'},{pr:'Antigamente, quando ele **vinha** ao parque, **via** mais crianças empinado pipa',en:'In the past, when he **came** to the park, he **saw** more kids flying kites'},{pr:'Antigamente, quando nos **vínhamos** ao parque, **víamos** mais crianças pulando corda',en:'In the past, when we **came** to the park, we **saw** more kids jumping rope'},{pr:'Antigamente, quando eles **vinham** ao parque, **viam** mais crianças brincando',en:'In the past, when they **came** to the park, they **saw** more kids playing'}],preterite:[{pr:'Ontem, quando **vim** ao parque, eu **vi** uma capivara',en:'Yesterday, when I **came** to the park, I **saw** a capybara'},{pr:'Ontem, quando **veio** a floresta, ele **viu** um urso',en:'Yesterday, when he **came** to the forest, he **saw** a bear'},{pr:'Ontem, quando **viemos** ao jardim, nos **vimos** uma flor maravilhosa',en:'Yesterday, when we **came** to the garden, we **saw** an amazing flower'},{pr:'Ontem, quando **vieram** a cidade, eles **viram** um desfile',en:'Yesterday, when they **came** to the city, they **saw** a parade'},{pr:'Eu **vim** à cidade e **vi** meu filho',en:'I **came** to the city and **saw** my son'},{pr:'Ele **veio** à festa e **viu** sua namorada',en:'He **came** to the city and **saw** his girlfriend'}]}});

/***/ }),

/***/ "./src/resources/vocab.yaml":
/*!**********************************!*\
  !*** ./src/resources/vocab.yaml ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ([{pr:'Socorro!',en:'Help!'},{pr:'Sunga',en:'Swimsuit'},{pr:'Compromisso',en:'Meeting'}]);

/***/ }),

/***/ "./src/resources/weak-phrases.yaml":
/*!*****************************************!*\
  !*** ./src/resources/weak-phrases.yaml ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ([{pr:'Ele é um colecionador que coleciona itens',en:'He is a collector who collects items'},{pr:'Tenho uma coleção',en:'I have a collection'},{pr:'Vou **ganhar** mais dinheiro naquela hora',en:'I will **get** more money at that time'},{pr:'Foi escuro lá fora',en:'It was dark outside'},{pr:'Está ficando oscuro lá fora',en:'It is getting dark outside'},{pr:'Venha me conhecer algum dia',en:'Come and meet me some day'},{pr:'Venha me ver algum dia',en:'Come and see me some day'},{pr:'Não perca a fé',en:'Do not lose faith'},{pr:'Ele não perde a fé',en:'He does not lose faith'},{pr:'Ela me apresentou ao seu namorado na festa',en:'She introduced me to her boyfriend at the party'},{pr:'Ele levou meu casaco',en:'He took my coat'},{pr:'Eu te dou este relógio como um presente',en:'I give this watch to you as a gift'},{pr:'Eu sonhei um sonho de um tempo passado',en:'I dreamed a dream of time gone by'},{pr:'Eu me diverti muito',en:'I had a good time'},{pr:'Foi um bom momento',en:'It was a good time'},{pr:'Ele veio de longe',en:'He came from far away'},{pr:'Estou vindo',en:'I am coming'},{pr:'Continue em frente, por favor',en:'Keep going forward, please'},{pr:'A luz é brilhante',en:'The light is bright'},{pr:'É favorável para nós irmos',en:'It is favorable for us to go'},{pr:'Eu pensei que nosso **compromisso** seria na semana que vem',en:'I thought that our **meeting** was next week'},{pr:'Isso não quer dizer nada',en:'This doesn\'t mean anything'},{pr:'Eles me **dão** arroz',en:'They **give** me rice'},{pr:'Ele não deve vir aqui novamente',en:'He must not come here again'},{pr:'Há outros fatores que nos fazem pensar assim',en:'There are other factors that make us think like that'},{pr:'Ela nos explora',en:'She exploits us'},{pr:'O restaurante fica em frente à escola',en:'The restaurant is in front of the school'},{pr:'Este é meu tipo de personagem',en:'This is my type of character'},{pr:'Eu não vejo minha namorada há duas semanas',en:'I have not seen my girlfriend for two weeks'},{pr:'Como tem passado o seu pai?',en:'How has your father been?'},{pr:'Meu filho tem me perguntado **coisas estranhas**',en:'My son has been asking me **strange questions**'},{pr:'Tente descobrir se tudo que ele disse é verdade',en:'Try to find out if everything that he said is true'},{pr:'Ele me conta tudo',en:'He tells me everything'},{pr:'Eu segurei um bebé em meus braços',en:'I held a baby in my arms'}]);

/***/ }),

/***/ "./src/Logger.js":
/*!***********************!*\
  !*** ./src/Logger.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Logger: () => (/* binding */ Logger)
/* harmony export */ });

const Logger = {
  _enabled: false,
  _debug: false,

  enable() {
    Logger._enabled = true;
  },

  disable() {
    Logger._enabled = false;
  },

  enableDebug() {
    Logger._debug = true;
  },

  disableDebug() {
    Logger._debug = false;
  },

  debug(...args) {
    if (!Logger._enabled) {
      return;
    }
    if (!Logger._debug) {
      return;
    }
    console.log(...args);
  },

  info(...args) {
    if (!Logger._enabled) {
      return;
    }
    console.log(...args);
  },

  warn(...args) {
    if (!Logger._enabled) {
      return;
    }
    console.warn(...args);
  },

  error(...args) {
    // always show errors
    console.error(...args);
  },
}


/***/ }),

/***/ "./src/app.js":
/*!********************!*\
  !*** ./src/app.js ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _resources_conjugation_ver_vir_yaml__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./resources/conjugation-ver-vir.yaml */ "./src/resources/conjugation-ver-vir.yaml");
/* harmony import */ var _resources_weak_phrases_yaml__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./resources/weak-phrases.yaml */ "./src/resources/weak-phrases.yaml");
/* harmony import */ var _resources_vocab_yaml__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./resources/vocab.yaml */ "./src/resources/vocab.yaml");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./constants */ "./src/constants.js");
/* harmony import */ var _keyboardUtils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./keyboardUtils */ "./src/keyboardUtils.js");
/* harmony import */ var _Logger__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Logger */ "./src/Logger.js");
/* harmony import */ var _speak__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./speak */ "./src/speak.js");
/* harmony import */ var _stores_OptionsStore__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./stores/OptionsStore */ "./src/stores/OptionsStore.js");
/* harmony import */ var _stores_QuestionsStore__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./stores/QuestionsStore */ "./src/stores/QuestionsStore.js");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./utils */ "./src/utils.js");


;











_Logger__WEBPACK_IMPORTED_MODULE_5__.Logger.enable();
_Logger__WEBPACK_IMPORTED_MODULE_5__.Logger.disableDebug();

const mainNode = (0,_utils__WEBPACK_IMPORTED_MODULE_9__.requireById)('main');
const cardQuestion = (0,_utils__WEBPACK_IMPORTED_MODULE_9__.requireById)('card-question');
const cardAnswer = (0,_utils__WEBPACK_IMPORTED_MODULE_9__.requireById)('card-answer');
const cardQuestionContent = (0,_utils__WEBPACK_IMPORTED_MODULE_9__.requireFirstChild)(cardQuestion)
const cardAnswerContent = (0,_utils__WEBPACK_IMPORTED_MODULE_9__.requireFirstChild)(cardAnswer)

;(0,_utils__WEBPACK_IMPORTED_MODULE_9__.assert)(cardQuestionContent, 'cardQuestionContent does not exist');
(0,_utils__WEBPACK_IMPORTED_MODULE_9__.assert)(cardAnswerContent, 'cardAnswerContent does not exist');

const buttonPrev = (0,_utils__WEBPACK_IMPORTED_MODULE_9__.requireById)('button-prev');
const buttonNext = (0,_utils__WEBPACK_IMPORTED_MODULE_9__.requireById)('button-next');
const buttonReshuffle = (0,_utils__WEBPACK_IMPORTED_MODULE_9__.requireById)('button-reshuffle');
const buttonSpeak = (0,_utils__WEBPACK_IMPORTED_MODULE_9__.requireById)('button-speak');
const buttonSnooze1h = (0,_utils__WEBPACK_IMPORTED_MODULE_9__.requireById)('button-snooze-1h');
const buttonSnooze7d = (0,_utils__WEBPACK_IMPORTED_MODULE_9__.requireById)('button-snooze-7d');
const buttonSnooze30d = (0,_utils__WEBPACK_IMPORTED_MODULE_9__.requireById)('button-snooze-30d');
const buttonUnsnooze = (0,_utils__WEBPACK_IMPORTED_MODULE_9__.requireById)('button-unsnooze');
const progress = (0,_utils__WEBPACK_IMPORTED_MODULE_9__.requireById)('progress');
const formQuestionOrder = (0,_utils__WEBPACK_IMPORTED_MODULE_9__.requireById)('form-question-order');
const formSelectExercises = (0,_utils__WEBPACK_IMPORTED_MODULE_9__.requireById)('form-select-exercises');
const formSelectMode = (0,_utils__WEBPACK_IMPORTED_MODULE_9__.requireById)('form-select-mode');
const speechStatus = (0,_utils__WEBPACK_IMPORTED_MODULE_9__.requireById)('speech-status');

/**
 * @typedef {{pr: string, en: string}} TranslationPair
 */

/**
 * Problem Tuple -> `[question, answer, portuguese-index-for-text-to-speech, hash]`
 * @typedef {[string, string, number]|[string, string, number, string]} Problem
 */

/** @type {{ revealed: boolean, problems: Problem[], index: number }} State */
const state = {
  revealed: false,
  problems: [],
  index: 0,
};

function main() {
  renderOptions();
  shuffleQuestions();
  setupListeners();
}

function randBool() {
  return Math.random() >= 0.5
}

function shuffleQuestions() {
  state.revealed = false;
  state.problems = [];
  state.index = 0;
  /** @type {Problem[]} */
  const problems = []
  /** @param {TranslationPair} trans */
  const addProblem = (trans) => {
    if (!trans.en || !trans.pr) {
      throw new Error(`Problem is invalid: ${JSON.stringify(trans)}`)
    }
    const order = _stores_OptionsStore__WEBPACK_IMPORTED_MODULE_7__.optionsStore.getOrder();
    if (order === _constants__WEBPACK_IMPORTED_MODULE_3__.ORDER.EN_FIRST) {
      problems.push([trans.en, trans.pr, 1]);
    } else if (order === _constants__WEBPACK_IMPORTED_MODULE_3__.ORDER.PR_FIRST) {
      problems.push([trans.pr, trans.en, 0]);
    } else {
      const flip = randBool();
      if (flip) {
        problems.push([trans.en, trans.pr, 1]);
      } else {
        problems.push([trans.pr, trans.en, 0]);
      }
    }
  }

  const selectedExercises = _stores_OptionsStore__WEBPACK_IMPORTED_MODULE_7__.optionsStore.getSelectedExercises()

  if (selectedExercises[_constants__WEBPACK_IMPORTED_MODULE_3__.EXERCISE.VER_CONJATION]) {
    _resources_conjugation_ver_vir_yaml__WEBPACK_IMPORTED_MODULE_0__["default"].ver.present.forEach(addProblem);
    _resources_conjugation_ver_vir_yaml__WEBPACK_IMPORTED_MODULE_0__["default"].ver.preterite.forEach(addProblem);
    _resources_conjugation_ver_vir_yaml__WEBPACK_IMPORTED_MODULE_0__["default"].ver.imperfect.forEach(addProblem);
    _resources_conjugation_ver_vir_yaml__WEBPACK_IMPORTED_MODULE_0__["default"].ver.presentPerfect.forEach(addProblem);
    _resources_conjugation_ver_vir_yaml__WEBPACK_IMPORTED_MODULE_0__["default"].ver.future.forEach(addProblem);
    _resources_conjugation_ver_vir_yaml__WEBPACK_IMPORTED_MODULE_0__["default"].ver.presentSubjunctive.forEach(addProblem);
  }

  if (selectedExercises[_constants__WEBPACK_IMPORTED_MODULE_3__.EXERCISE.VIR_CONJUGATION]) {
    _resources_conjugation_ver_vir_yaml__WEBPACK_IMPORTED_MODULE_0__["default"].vir.present.forEach(addProblem);
    _resources_conjugation_ver_vir_yaml__WEBPACK_IMPORTED_MODULE_0__["default"].vir.preterite.forEach(addProblem);
    _resources_conjugation_ver_vir_yaml__WEBPACK_IMPORTED_MODULE_0__["default"].vir.imperfect.forEach(addProblem);
    _resources_conjugation_ver_vir_yaml__WEBPACK_IMPORTED_MODULE_0__["default"].vir.presentPerfect.forEach(addProblem);
    _resources_conjugation_ver_vir_yaml__WEBPACK_IMPORTED_MODULE_0__["default"].vir.future.forEach(addProblem);
    _resources_conjugation_ver_vir_yaml__WEBPACK_IMPORTED_MODULE_0__["default"].vir.presentSubjunctive.forEach(addProblem);
  }

  if (selectedExercises[_constants__WEBPACK_IMPORTED_MODULE_3__.EXERCISE.VER_AND_VIR]) {
    _resources_conjugation_ver_vir_yaml__WEBPACK_IMPORTED_MODULE_0__["default"].ver_and_vir.present.forEach(addProblem);
    _resources_conjugation_ver_vir_yaml__WEBPACK_IMPORTED_MODULE_0__["default"].ver_and_vir.preterite.forEach(addProblem);
    _resources_conjugation_ver_vir_yaml__WEBPACK_IMPORTED_MODULE_0__["default"].ver_and_vir.imperfect.forEach(addProblem);
  }

  if (selectedExercises[_constants__WEBPACK_IMPORTED_MODULE_3__.EXERCISE.WEAK_PHRASES]) {
    _resources_weak_phrases_yaml__WEBPACK_IMPORTED_MODULE_1__["default"].forEach(addProblem);
  }

  if (selectedExercises[_constants__WEBPACK_IMPORTED_MODULE_3__.EXERCISE.VOCAB]) {
    _resources_vocab_yaml__WEBPACK_IMPORTED_MODULE_2__["default"].forEach(addProblem);
  }

  state.problems = (0,_utils__WEBPACK_IMPORTED_MODULE_9__.shuffleArray)(problems);

  prepareHashData(() => {
    renderContent();
  });
}

function playTranslationAudio() {
  const numProblems = state.problems.length
  if (numProblems === 0) {
    return;
  }
  const currentIndex = state.index % numProblems;
  const currentProblem = state.problems[currentIndex];
  /** @type {string} */
  // @ts-ignore
  const ptPhrase = currentProblem[currentProblem[2]]
  const [showSpeakingStatus, hideSpeakingStatus] = prepareSpeakingStatus();
  const didSpeak = (0,_speak__WEBPACK_IMPORTED_MODULE_6__.speak)(ptPhrase, () => hideSpeakingStatus());
  if (didSpeak) {
    showSpeakingStatus();
  }
}

function advance() {
  if (state.revealed) {
    state.index++;
    state.revealed = false;
    const numProblems = state.problems.length
    const currentIndex = state.index % numProblems;
    if (currentIndex === 0) {
      celebrate();
    } else if (_stores_OptionsStore__WEBPACK_IMPORTED_MODULE_7__.optionsStore.getMode() === _constants__WEBPACK_IMPORTED_MODULE_3__.MODE.LISTENING) {
      playTranslationAudio();
    }
  } else {
    state.revealed = true;
  }
  renderContent();
}

function rewind() {
  state.revealed = false;
  state.index--;
  if (state.index < 0) state.index = state.problems.length - 1;
  renderContent();
}

function setupListeners() {
  buttonNext.addEventListener('click', advance);
  buttonPrev.addEventListener('click', rewind);
  buttonReshuffle.addEventListener('click', shuffleQuestions);
  buttonSpeak.addEventListener('click', playTranslationAudio);
  buttonSnooze1h.addEventListener('click', handleClickSnooze);
  buttonSnooze7d.addEventListener('click', handleClickSnooze);
  buttonSnooze30d.addEventListener('click', handleClickSnooze);
  buttonUnsnooze.addEventListener('click', handleClickUnsnooze);
  document.addEventListener('keydown', handleKeyPress);
  // @ts-ignore
  formQuestionOrder.addEventListener('change', handleQuestionOrderChange)
  // @ts-ignore
  formSelectExercises.addEventListener('change', handleSelectExerciseChange)
  // @ts-ignore
  formSelectMode.addEventListener('change', handleSelectModeChange)
}

/**
 * @param {KeyboardEvent} ev
 */
function handleKeyPress(ev) {
  if (!ev) return;

  if ((0,_keyboardUtils__WEBPACK_IMPORTED_MODULE_4__.isCharPressed)(ev, _keyboardUtils__WEBPACK_IMPORTED_MODULE_4__.SpecialKey.ArrowRight)) {
    advance();
    ev.preventDefault();
  } else if ((0,_keyboardUtils__WEBPACK_IMPORTED_MODULE_4__.isCharPressed)(ev, _keyboardUtils__WEBPACK_IMPORTED_MODULE_4__.SpecialKey.ArrowLeft)) {
    rewind();
    ev.preventDefault();
  } else if ((0,_keyboardUtils__WEBPACK_IMPORTED_MODULE_4__.isCharPressed)(ev, _keyboardUtils__WEBPACK_IMPORTED_MODULE_4__.SpecialKey.Space)) {
    ev.preventDefault();
    playTranslationAudio();
  } else if ((0,_keyboardUtils__WEBPACK_IMPORTED_MODULE_4__.isCharPressed)(ev, _keyboardUtils__WEBPACK_IMPORTED_MODULE_4__.SpecialKey.Enter) && ev.shiftKey && ev.altKey) {
    celebrate();
  }
}

/**
 * @param {Event & { target: HTMLInputElement }} ev
 */
function handleQuestionOrderChange(ev) {
  if (!ev.target) return
  // state.order = ev.target.value;
  _stores_OptionsStore__WEBPACK_IMPORTED_MODULE_7__.optionsStore.setOrder(ev.target.value);
  shuffleQuestions();
}

/**
 * @param {Event & { target: HTMLInputElement }} ev
 */
function handleSelectExerciseChange(ev) {
  _stores_OptionsStore__WEBPACK_IMPORTED_MODULE_7__.optionsStore.setSelectedExercise(ev.target.name, ev.target.checked);
  shuffleQuestions();
}

/**
 * @param {Event & { target: HTMLInputElement }} ev
 */
function handleSelectModeChange(ev) {
  _stores_OptionsStore__WEBPACK_IMPORTED_MODULE_7__.optionsStore.setMode(ev.target.value);
  shuffleQuestions();
}

/**
 * @param {*} ev
 * @returns
 */
function handleClickSnooze(ev) {
  const seconds = parseInt(ev.currentTarget.dataset.seconds, 10) || 0;
  if (!seconds) return;
  const snoozeDurationMs = seconds * 1000;
  snoozeCurrentQuestion(snoozeDurationMs);
  if (_stores_OptionsStore__WEBPACK_IMPORTED_MODULE_7__.optionsStore.getMode() === _constants__WEBPACK_IMPORTED_MODULE_3__.MODE.LISTENING) {
    playTranslationAudio();
  }
  renderContent();
}

/**
 * @param {*} ev
 */
function handleClickUnsnooze(ev) {
  _stores_QuestionsStore__WEBPACK_IMPORTED_MODULE_8__.questionsStore.unsnoozeAllQuestions();
  shuffleQuestions();
}

function renderContent() {
  const numProblems = state.problems.length

  if (numProblems === 0) {
    cardQuestionContent.innerHTML = "Please select an exercise to begin";
    cardAnswerContent.innerHTML = "Por favor selecione um exercício para começar";
    cardAnswer.classList.add('revealed');
    progress.innerHTML = "0 / 0";
    return;
  }

  const currentIndex = state.index % numProblems;
  const progressText = `${currentIndex + 1} / ${numProblems}`
  const currentProblem = state.problems[currentIndex];

  (0,_utils__WEBPACK_IMPORTED_MODULE_9__.assert)(currentProblem, `currentProblem out of bounds - tried index ${currentIndex} for array of length ${numProblems}`);
  if (!currentProblem) return

  cardQuestionContent.innerHTML = (0,_utils__WEBPACK_IMPORTED_MODULE_9__.markifyText)(currentProblem[0]);
  cardAnswerContent.innerHTML = (0,_utils__WEBPACK_IMPORTED_MODULE_9__.markifyText)(currentProblem[1]);

  if (state.revealed) {
    cardQuestion.classList.add('revealed');
    cardAnswer.classList.add('revealed');
  } else {
    cardQuestion.classList.remove('revealed');
    cardAnswer.classList.remove('revealed');
  }

  mainNode.classList.remove('mode-reading');
  mainNode.classList.remove('mode-listening')
  switch (_stores_OptionsStore__WEBPACK_IMPORTED_MODULE_7__.optionsStore.getMode()) {
    case _constants__WEBPACK_IMPORTED_MODULE_3__.MODE.LISTENING:
      mainNode.classList.add('mode-listening');
      break;
    case _constants__WEBPACK_IMPORTED_MODULE_3__.MODE.READING:
      mainNode.classList.add('mode-reading');
      break;
  }

  progress.innerHTML = progressText;
}

function renderOptions() {
  formQuestionOrder.querySelectorAll('input').forEach(input => {
    if (input.name === 'question-order') {
      input.checked = _stores_OptionsStore__WEBPACK_IMPORTED_MODULE_7__.optionsStore.getOrder() === input.value;
    }
  });

  formSelectExercises.querySelectorAll('input').forEach(input => {
    if (input.name.includes('checkbox-exercise')) {
      input.checked = !!_stores_OptionsStore__WEBPACK_IMPORTED_MODULE_7__.optionsStore.getSelectedExercises()[input.name];
    }
  });

  formSelectMode.querySelectorAll('select').forEach(select => {
    if (select.name.includes('select-mode')) {
      select.value = _stores_OptionsStore__WEBPACK_IMPORTED_MODULE_7__.optionsStore.getMode();
    }
  });
}

/**
 * @param {number} snoozeDurationMs
 */
function snoozeCurrentQuestion(snoozeDurationMs, shouldRemoveProblem = true) {
  const numProblems = state.problems.length
  if (numProblems === 0) {
    return;
  }
  const currentIndex = state.index % numProblems;
  const currentProblem = state.problems[currentIndex];
  if (!currentProblem) return;
  const hash = currentProblem[3] || "";
  const didSnooze = _stores_QuestionsStore__WEBPACK_IMPORTED_MODULE_8__.questionsStore.snoozeQuestion(hash, snoozeDurationMs);
  if (didSnooze && shouldRemoveProblem) {
    state.problems = (0,_utils__WEBPACK_IMPORTED_MODULE_9__.removeArrayElement)(state.problems, currentIndex);
    state.revealed = false;
  }
}

/** @type {null | (() => void)} */
let cleanupHashProcessor = null;

/**
 * Hash Portuguese phrase to allow for "snoozing" a flash card
 */
function prepareHashData(onProcessingComplete = () => {}) {
  if (cleanupHashProcessor) {
    cleanupHashProcessor();
  }

  let ignore = false;

  async function process() {
    const timeStart = performance.now();
    let i = 0;
    while (!ignore && i < state.problems.length) {
      const problem = state.problems[i];
      if (!problem) continue;
      const ptPhrase = String(problem[problem[2]]);
      const hash = await (0,_utils__WEBPACK_IMPORTED_MODULE_9__.sha256)(ptPhrase);
      // @ts-ignore
      state.problems[i][3] = hash;
      _Logger__WEBPACK_IMPORTED_MODULE_5__.Logger.debug(`processing msg ${i} - ${hash} generated for "${ptPhrase}"`)
      i++;
    }
    if (!ignore) {
      const snoozedQuestions = _stores_QuestionsStore__WEBPACK_IMPORTED_MODULE_8__.questionsStore.getSnoozedQuestions();
      state.problems = state.problems.filter(problem => {
        const hash = problem[3] || "";
        const currentTime = Date.now();
        const timeSnoozeExpiresMs = snoozedQuestions[hash] || 0;
        return !!hash && timeSnoozeExpiresMs < currentTime
      })

      const timeEnd = performance.now();
      _Logger__WEBPACK_IMPORTED_MODULE_5__.Logger.info(`processing complete! - took ${timeEnd - timeStart}ms`);
      onProcessingComplete();
    }
  }

  process();

  cleanupHashProcessor = () => {
    ignore = true;
    cleanupHashProcessor = null;
  }
}

/**
 * @returns {[() => void, () => void]}
 */
function prepareSpeakingStatus() {
  /** @type {NodeJS.Timeout | null} */
  let interval = null;
  const showSpeakingStatus = () => {
    let i = 0;
    speechStatus.innerText = '.';
    interval = setInterval(() => {
      i++;
      speechStatus.innerText = (() => {
        if (i % 3 === 0) {
          return '.';
        }
        if (i % 3 === 1) {
          return '..';
        }
        return '...';
      })()
    }, 500);
  }
  const hideSpeakingStatus = () => {
    if (interval) {
      clearInterval(interval);
    }
    speechStatus.innerText = "";
  };
  return [showSpeakingStatus, hideSpeakingStatus];
}

function celebrate() {
  const sounds = [
    'sfx/162395__zut50__yay.mp3',
    'sfx/239594__xtrgamr__unimpressedyay_01.wav',
    'sfx/252808__xtrgamr__yay.wav',
    'sfx/323703__reitanna__funny-yay.wav',
    'sfx/353923__dr_skitz__yay.wav',
  ]
  const sound = new Audio((0,_utils__WEBPACK_IMPORTED_MODULE_9__.getRandomElement)(sounds));
  sound.play();
}

main();


/***/ }),

/***/ "./src/constants.js":
/*!**************************!*\
  !*** ./src/constants.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EXERCISE: () => (/* binding */ EXERCISE),
/* harmony export */   MODE: () => (/* binding */ MODE),
/* harmony export */   ONE_HOUR_MS: () => (/* binding */ ONE_HOUR_MS),
/* harmony export */   ORDER: () => (/* binding */ ORDER)
/* harmony export */ });

/**
 * @readonly
 * @enum {string}
 */
const ORDER = {
  PR_FIRST: 'pr-first',
  EN_FIRST: 'en-first',
  ANY: 'any',
}

/**
 * @readonly
 * @enum {string}
 */
const EXERCISE = {
  VER_CONJATION: 'checkbox-exercise-ver-conjugation',
  VIR_CONJUGATION: 'checkbox-exercise-vir-conjugation',
  VER_AND_VIR: 'checkbox-exercise-ver-and-vir',
  WEAK_PHRASES: 'checkbox-exercise-weak-phrases',
  VOCAB: 'checkbox-exercise-vocab',
}

/**
 * Practice mode - e.g. reading or listening
 * @readonly
 * @enum {string}
 */
const MODE = {
  READING: 'mode-reading',
  LISTENING: 'mode-listening',
}

/** @readonly */
const ONE_HOUR_MS = 60 * 60 * 1000;


/***/ }),

/***/ "./src/keyboardUtils.js":
/*!******************************!*\
  !*** ./src/keyboardUtils.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SpecialKey: () => (/* binding */ SpecialKey),
/* harmony export */   findNumberPressed: () => (/* binding */ findNumberPressed),
/* harmony export */   isCharPressed: () => (/* binding */ isCharPressed),
/* harmony export */   isNumberPressed: () => (/* binding */ isNumberPressed)
/* harmony export */ });

const SpecialKey = {
  Backspace: 'backspace',
  Escape: 'escape',
  Tab: 'tab',
  Space: 'space',
  Enter: 'enter',
  Delete: 'delete',
  ArrowUp: 'ArrowUp',
  ArrowDown: 'ArrowDown',
  ArrowLeft: 'ArrowLeft',
  ArrowRight: 'ArrowRight',
}

/**
 * Keyboard options
 * @typedef {Object} KeyboardOptions
 * @property {boolean} [ctrlKey] - control key is pressed.
 * @property {boolean} [shiftKey] - shift key is pressed.
 * @property {boolean} [altKey] - alt key is pressed.
 */

/**
 * determine whether a number is pressed
 * @param {KeyboardEvent} ev 
 * @param {number} num 
 * @param {KeyboardOptions} [opts]
 * @returns boolean
 */
function isNumberPressed(ev, num, opts = {}) {
  if (!areOptionsSatisfied(ev, opts)) return false;
  return findNumberPressed(ev) === num;
}

/**
 * determine whether a char is pressed
 * @param {KeyboardEvent} ev 
 * @param {string} char
 * @param {KeyboardOptions} [opts]
 * @returns boolean
 */
function isCharPressed(ev, char, opts = {}) {
  if (!areOptionsSatisfied(ev, opts)) return false;
  return findCharPressed(ev) === char;
}

/**
 * Determine whether options are satisfied (ctrl, alt, shift, etc.)
 * @param {KeyboardEvent} ev 
 * @param {KeyboardOptions} [opts]
 * @returns boolean
 */
function areOptionsSatisfied(ev, opts = {}) {
  if (!ev) return false;
  const isControlPressed = ev.metaKey || ev.ctrlKey; // meta key is CMD key on mac
  const isShiftPressed = ev.shiftKey;
  const isAltKeyPressed = ev.altKey;
  if (opts.ctrlKey && !isControlPressed) return false;
  if (opts.shiftKey && !isShiftPressed) return false;
  if (opts.altKey && !isAltKeyPressed) return false;
  return true;
}

/**
 * Find number pressed, or -1 if no match found
 * @param {KeyboardEvent} ev
 * @returns number
 */
function findNumberPressed(ev) {
  if (ev.key === '0' || ev.code === 'Digit0' || ev.code === 'Numpad0' || ev.keyCode === 48 || ev.keyCode === 96) return 0;
  if (ev.key === '1' || ev.code === 'Digit1' || ev.code === 'Numpad1' || ev.keyCode === 49 || ev.keyCode === 97) return 1;
  if (ev.key === '2' || ev.code === 'Digit2' || ev.code === 'Numpad2' || ev.keyCode === 50 || ev.keyCode === 98) return 2;
  if (ev.key === '3' || ev.code === 'Digit3' || ev.code === 'Numpad3' || ev.keyCode === 51 || ev.keyCode === 99) return 3;
  if (ev.key === '4' || ev.code === 'Digit4' || ev.code === 'Numpad4' || ev.keyCode === 52 || ev.keyCode === 100) return 4;
  if (ev.key === '5' || ev.code === 'Digit5' || ev.code === 'Numpad5' || ev.keyCode === 53 || ev.keyCode === 101) return 5;
  if (ev.key === '6' || ev.code === 'Digit6' || ev.code === 'Numpad6' || ev.keyCode === 54 || ev.keyCode === 102) return 6;
  if (ev.key === '7' || ev.code === 'Digit7' || ev.code === 'Numpad7' || ev.keyCode === 55 || ev.keyCode === 103) return 7;
  if (ev.key === '8' || ev.code === 'Digit8' || ev.code === 'Numpad8' || ev.keyCode === 56 || ev.keyCode === 104) return 8;
  if (ev.key === '9' || ev.code === 'Digit9' || ev.code === 'Numpad9' || ev.keyCode === 57 || ev.keyCode === 105) return 9;
  return -1;
}

/**
 * Find char pressed, or "" if no match found
 * @param {KeyboardEvent} ev
 * @returns string
 */
function findCharPressed(ev) {
  const num = findNumberPressed(ev);
  if (num !== -1) return String(num);
  if (ev.key === 'a' || ev.code === 'KeyA' || ev.keyCode === 65) return 'a';
  if (ev.key === 'b' || ev.code === 'KeyB' || ev.keyCode === 66) return 'b';
  if (ev.key === 'c' || ev.code === 'KeyC' || ev.keyCode === 67) return 'c';
  if (ev.key === 'd' || ev.code === 'KeyD' || ev.keyCode === 68) return 'd';
  if (ev.key === 'e' || ev.code === 'KeyE' || ev.keyCode === 69) return 'e';
  if (ev.key === 'f' || ev.code === 'KeyF' || ev.keyCode === 70) return 'f';
  if (ev.key === 'g' || ev.code === 'KeyG' || ev.keyCode === 71) return 'g';
  if (ev.key === 'h' || ev.code === 'KeyH' || ev.keyCode === 72) return 'h';
  if (ev.key === 'i' || ev.code === 'KeyI' || ev.keyCode === 73) return 'i';
  if (ev.key === 'j' || ev.code === 'KeyJ' || ev.keyCode === 74) return 'j';
  if (ev.key === 'k' || ev.code === 'KeyK' || ev.keyCode === 75) return 'k';
  if (ev.key === 'l' || ev.code === 'KeyL' || ev.keyCode === 76) return 'l';
  if (ev.key === 'm' || ev.code === 'KeyM' || ev.keyCode === 77) return 'm';
  if (ev.key === 'n' || ev.code === 'KeyN' || ev.keyCode === 78) return 'n';
  if (ev.key === 'o' || ev.code === 'KeyO' || ev.keyCode === 79) return 'o';
  if (ev.key === 'p' || ev.code === 'KeyP' || ev.keyCode === 80) return 'p';
  if (ev.key === 'q' || ev.code === 'KeyQ' || ev.keyCode === 81) return 'q';
  if (ev.key === 'r' || ev.code === 'KeyR' || ev.keyCode === 82) return 'r';
  if (ev.key === 's' || ev.code === 'KeyS' || ev.keyCode === 83) return 's';
  if (ev.key === 't' || ev.code === 'KeyT' || ev.keyCode === 84) return 't';
  if (ev.key === 'u' || ev.code === 'KeyU' || ev.keyCode === 85) return 'u';
  if (ev.key === 'v' || ev.code === 'KeyV' || ev.keyCode === 86) return 'v';
  if (ev.key === 'w' || ev.code === 'KeyW' || ev.keyCode === 87) return 'w';
  if (ev.key === 'x' || ev.code === 'KeyX' || ev.keyCode === 88) return 'x';
  if (ev.key === 'y' || ev.code === 'KeyY' || ev.keyCode === 89) return 'y';
  if (ev.key === 'z' || ev.code === 'KeyZ' || ev.keyCode === 90) return 'z';
  if (ev.key === '`' || ev.code === 'Backquote' || ev.keyCode === 192) return '`';
  if (ev.key === '-' || ev.code === 'Minus' || ev.keyCode === 189) return '-';
  if (ev.key === '=' || ev.code === 'Equals' || ev.keyCode === 187) return '=';
  if (ev.key === '-' || ev.code === 'NumpadSubtract' || ev.keyCode === 109) return '-';
  if (ev.key === '+' || ev.code === 'NumpadAdd' || ev.keyCode === 107) return '+';
  if (ev.key === '[' || ev.code === 'BracketLeft' || ev.keyCode === 219) return '[';
  if (ev.key === ']' || ev.code === 'BracketRight' || ev.keyCode === 221) return ']';
  if (ev.key === 'Backspace' || ev.code === 'Backspace' || ev.keyCode === 221) return SpecialKey.Backspace;
  if (ev.key === 'Escape' || ev.code === 'Escape' || ev.keyCode === 27) return SpecialKey.Escape;
  if (ev.key === ' ' || ev.code === 'Space' || ev.keyCode === 32) return SpecialKey.Space;
  if (ev.key === 'Enter' || ev.code === 'Enter' || ev.code === 'NumpadEnter' || ev.keyCode === 13) return SpecialKey.Enter;
  if (ev.key === 'Delete' || ev.code === 'Delete' || ev.keyCode === 46) return SpecialKey.Delete;
  if (ev.key === 'ArrowUp' || ev.code === 'ArrowUp' || ev.keyCode === 38) return SpecialKey.ArrowUp;
  if (ev.key === 'ArrowDown' || ev.code === 'ArrowDown' || ev.keyCode === 40) return SpecialKey.ArrowDown;
  if (ev.key === 'ArrowLeft' || ev.code === 'ArrowLeft' || ev.keyCode === 37) return SpecialKey.ArrowLeft;
  if (ev.key === 'ArrowRight' || ev.code === 'ArrowRight' || ev.keyCode === 39) return SpecialKey.ArrowRight;
  return ''
}


/***/ }),

/***/ "./src/speak.js":
/*!**********************!*\
  !*** ./src/speak.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   speak: () => (/* binding */ speak)
/* harmony export */ });
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ "./src/utils.js");


const synth = window.speechSynthesis;

/** @type {HTMLSelectElement} */
// @ts-ignore
const selectVoice = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.requireById)("select-voice")

/** @type {SpeechSynthesisVoice[]} */
let voices = [];

function loadVoices() {
  // note that in some browsers, loadVoices() must occur after user interaction...
  voices = synth.getVoices();
  if (!voices.length) {
    return;
  }
  for (const child of selectVoice.children) {
    child.remove();
  }
  let chosenVoiceIndex = 0;
  let backupVoiceIndex = 0;
  for (let i = 0; i < voices.length; i++) {
    const voice = voices[i];
    if (!voice) {
      continue;
    }
    if (!/^pt-/.test(voice.lang)) {
      continue;
    }
    const option = document.createElement("option");
    option.textContent = `${voice.name} (${voice.lang})`;
    option.value = String(i);
    selectVoice.appendChild(option);
    if (!chosenVoiceIndex && voice.lang === 'pt-BR' && voice.name.toLowerCase().includes('google')) {
      chosenVoiceIndex = i;
    }
    if (!backupVoiceIndex  && voice.lang === 'pt-BR') {
      backupVoiceIndex = i;
    }
  }
  selectVoice.value = String(chosenVoiceIndex || backupVoiceIndex);
}

// in Google Chrome the voices are not ready on page load
if ("onvoiceschanged" in synth) {
  synth.onvoiceschanged = loadVoices;
} else {
  loadVoices();
}

/**
 * @param {string} text
 * @param {(() => void) | undefined} onFinished
 * @returns {boolean}
 */
const speak = (text, onFinished = undefined) => {
  if (synth.speaking) return false;
  if (!voices.length) loadVoices(-1);
  const filtered = text.replace(/\*\*/g, '');
  const utterance = new SpeechSynthesisUtterance(filtered);
  const voice = voices[parseInt(selectVoice.value, 10)];
  if (!voice) {
    return false;
  }
  utterance.voice = voice;
  synth.speak(utterance);
  if (onFinished) {
    utterance.onend = onFinished;
  }
  return true;
}


/***/ }),

/***/ "./src/stores/BaseStore.js":
/*!*********************************!*\
  !*** ./src/stores/BaseStore.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BaseStore: () => (/* binding */ BaseStore)
/* harmony export */ });

class BaseStore {
  get key() { return ""; } // abstract

  clearStore = () => {
    this._validate();
    localStorage.removeItem(this.key);
  }

  getStore = () => {
    this._validate();
    try {
      const itemRaw = localStorage.getItem(this.key);
      if (!itemRaw) return null;
      return JSON.parse(itemRaw)
    } catch (err) {
      console.warn(err);
      return null;
    }
  }

  /**
   * @param {Object} value
   */
  setStore = (value) => {
    this._validate();
    try {
      localStorage.setItem(this.key, JSON.stringify(value))
    } catch (err) {
      console.warn(err);
    }
  }

  _validate = () => {
    if (!this.key) throw new Error('local storage key is required');
  }
}

/***/ }),

/***/ "./src/stores/OptionsStore.js":
/*!************************************!*\
  !*** ./src/stores/OptionsStore.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   optionsStore: () => (/* binding */ optionsStore)
/* harmony export */ });
/* harmony import */ var _BaseStore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BaseStore */ "./src/stores/BaseStore.js");
/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants */ "./src/constants.js");



class OptionsStore extends _BaseStore__WEBPACK_IMPORTED_MODULE_0__.BaseStore {
  /** @override */
  get key() {
    return "pt-options"
  }

  _defaultValue = {
    order: _constants__WEBPACK_IMPORTED_MODULE_1__.ORDER.ANY,
    selectedExercises: {
      [_constants__WEBPACK_IMPORTED_MODULE_1__.EXERCISE.VER_CONJATION]: true,
      [_constants__WEBPACK_IMPORTED_MODULE_1__.EXERCISE.VIR_CONJUGATION]: true,
      [_constants__WEBPACK_IMPORTED_MODULE_1__.EXERCISE.VER_AND_VIR]: true,
      [_constants__WEBPACK_IMPORTED_MODULE_1__.EXERCISE.WEAK_PHRASES]: true,
      [_constants__WEBPACK_IMPORTED_MODULE_1__.EXERCISE.VOCAB]: true,
    },
    mode: _constants__WEBPACK_IMPORTED_MODULE_1__.MODE.READING,
  };

  _state = (() => {
    const stored = this.getStore()
    if (!stored) {
      return { ...this._defaultValue }
    }
    return {
      ...this._defaultValue,
      ...stored,
    }
  })();

  /**
   * @returns {ORDER}
   */
  getOrder = () => this._state.order;

  /**
   * @param {ORDER} val
   */
  setOrder = (val) => {
    this._state.order = val;
    this.setStore(this._state);
  }

  /**
   * @returns {Record<EXERCISE, boolean>}
   */
  getSelectedExercises = () => ({
    ...this._defaultValue.selectedExercises,
    ...this._state.selectedExercises,
  });

  /**
   * @param {string} exercise
   * @param {boolean} isSelected
   */
  setSelectedExercise = (exercise, isSelected) => {
    this._state.selectedExercises[exercise] = isSelected;
    this.setStore(this._state);
  }

  /**
   * @returns {MODE}
   */
  getMode = () => this._state.mode;

  /**
   * @param {MODE} mode
   */
  setMode = (mode) => {
    this._state.mode = mode;
    this.setStore(this._state);
  }

  reset = () => {
    this.clearStore();
    this._state = { ...this._defaultValue };
  }
}

const optionsStore = new OptionsStore();


/***/ }),

/***/ "./src/stores/QuestionsStore.js":
/*!**************************************!*\
  !*** ./src/stores/QuestionsStore.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   questionsStore: () => (/* binding */ questionsStore)
/* harmony export */ });
/* harmony import */ var _BaseStore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BaseStore */ "./src/stores/BaseStore.js");


class QuestionsStore extends _BaseStore__WEBPACK_IMPORTED_MODULE_0__.BaseStore {
  /** @override */
  get key() {
    return "pt-questions"
  }

  /**
   * Snoozed = key-value pairs of hashed portuguese phrase (sha256), and timeSnoozeExpiresMs
   * ```snoozed: Record<string, number>```
   */
  _defaultValue = {
    snoozed: {},
  };

  _state = this.getStore() || { ...this._defaultValue };

  getSnoozedQuestions = () => ({ ...this._state.snoozed });

  /**
   * @param {string} hash
   * @param {number} snoozeDurationMs
   */
  snoozeQuestion = (hash, snoozeDurationMs) => {
    if (!hash) {
      return false;
    }
    const now = Date.now();
    const timeSnoozeExpiresMs = now + snoozeDurationMs;
    this._state.snoozed[hash] = timeSnoozeExpiresMs;
    this.setStore(this._state);
    return true;
  }

  unsnoozeAllQuestions = () => {
    this._state.snoozed = {};
    this.setStore(this._state);
  }

  reset = () => {
    this.clearStore();
    this._state = { ...this._defaultValue };
  }
}

const questionsStore = new QuestionsStore();



/***/ }),

/***/ "./src/utils.js":
/*!**********************!*\
  !*** ./src/utils.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   assert: () => (/* binding */ assert),
/* harmony export */   getRandomElement: () => (/* binding */ getRandomElement),
/* harmony export */   markifyText: () => (/* binding */ markifyText),
/* harmony export */   removeArrayElement: () => (/* binding */ removeArrayElement),
/* harmony export */   requireById: () => (/* binding */ requireById),
/* harmony export */   requireFirstChild: () => (/* binding */ requireFirstChild),
/* harmony export */   sha256: () => (/* binding */ sha256),
/* harmony export */   shuffleArray: () => (/* binding */ shuffleArray)
/* harmony export */ });

/**
 * @template T
 * @param {Array.<T>} array
 * @returns {Array.<T>}
 */
function shuffleArray(array) {
  /** @type {Array.<T>} */
  const copy = array.slice()
  for (let i = copy.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    const temp = copy[i];
    if (!temp) continue;
    if (!copy[j]) continue;
    copy[i] = copy[j];
    copy[j] = temp;
  }
  return copy;
}

/**
 * @template T
 * @param {Array.<T>} arr
 * @returns {T}
 */
function getRandomElement(arr) {
  const randomIndex = Math.floor(Math.random() * arr.length);
  const elem = arr[randomIndex];
  if (!elem) throw new Error('something went terribly wrong');
  return elem;
}

/**
 * @param {any|(() => boolean)} condition
 * @param {?string} optText
 */
function assert(condition, optText) {
  const result = typeof condition === 'function' ? condition() : condition
  if (!result) {
    throw new Error(optText || 'Assertion Failed!');
  }
}

/**
 * @param {string} id
 * @returns {HTMLElement}
 */
function requireById(id) {
  const elem = document.getElementById(id);
  if (!elem) throw new Error(`Could not find DOM element with id "${id}"!!`);
  return elem;
}

/**
 * @param {HTMLElement} node
 * @returns {Element}
 */
function requireFirstChild(node) {
  const elem = node.children[0]
  if (!elem) throw new Error(`Could not get child from DOM element ${node}`)
  return elem;
}

/**
 * @template T
 * @param {Array.<T>} items
 * @param {number} index
 * @returns {Array.<T>}
 */
function removeArrayElement(items, index = -1) {
  if (index < 0) return items;
  if (index >= items.length) return items;
  return items.slice(0, index).concat(items.slice(index + 1))
}

async function sha256(message = '') {
  const msgUint8 = new TextEncoder().encode(message); // encode as (utf-8) Uint8Array
  const hashBuffer = await window.crypto.subtle.digest("SHA-256", msgUint8); // hash the message
  const hashArray = Array.from(new Uint8Array(hashBuffer)); // convert buffer to byte array
  const hashHex = hashArray
    .map((b) => b.toString(16).padStart(2, "0"))
    .join(""); // convert bytes to hex string
  return hashHex;
}

/**
 * @param {string} text
 * @returns string
 */
function markifyText(text) {
  // https://regex101.com/r/epZo6M/1
  const regBold = /(?<!\S)\*\*(.+?)\*\*(?!\*)(?!\S)/g
  // https://regex101.com/r/nkYFpp/1
  const regEm = /(?<!\S)\_(.+?)\_(?!\S)/g
  const newline = /\s*\\n\s*/g;
  return text
    .replace(regBold, "<strong class=\"accent\">$1</strong>")
    .replace(regEm, "<em class=\"subtle\">$1</em>")
    .replace(newline, "<br/>")
}


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./app */ "./src/app.js");


})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFdBQVcsV0FBVztBQUN0QixXQUFXLFFBQVE7QUFDbkIsYUFBYTtBQUNiO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTs7QUFFTztBQUNQLHNEQUFzRDtBQUN0RCw2RUFBNkU7QUFDN0UsNERBQTREO0FBQzVEO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTs7QUFFQTtBQUNBLFdBQVcsUUFBUTtBQUNuQjtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztVQ25HQTtVQUNBOztVQUVBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBOztVQUVBO1VBQ0E7O1VBRUE7VUFDQTtVQUNBOzs7OztXQ3RCQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLHlDQUF5Qyx3Q0FBd0M7V0FDakY7V0FDQTtXQUNBOzs7OztXQ1BBOzs7OztXQ0FBO1dBQ0E7V0FDQTtXQUNBLHVEQUF1RCxpQkFBaUI7V0FDeEU7V0FDQSxnREFBZ0QsYUFBYTtXQUM3RDs7Ozs7Ozs7Ozs7O0FDTmMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb3J0dWd1ZXNlLWdhbWUvLi9zcmMvcmVzb3VyY2VzL2Nvbmp1Z2F0aW9uLXZlci12aXIueWFtbCIsIndlYnBhY2s6Ly9wb3J0dWd1ZXNlLWdhbWUvLi9zcmMvcmVzb3VyY2VzL3ZvY2FiLnlhbWwiLCJ3ZWJwYWNrOi8vcG9ydHVndWVzZS1nYW1lLy4vc3JjL3Jlc291cmNlcy93ZWFrLXBocmFzZXMueWFtbCIsIndlYnBhY2s6Ly9wb3J0dWd1ZXNlLWdhbWUvLi9zcmMvTG9nZ2VyLmpzIiwid2VicGFjazovL3BvcnR1Z3Vlc2UtZ2FtZS8uL3NyYy9hcHAuanMiLCJ3ZWJwYWNrOi8vcG9ydHVndWVzZS1nYW1lLy4vc3JjL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wb3J0dWd1ZXNlLWdhbWUvLi9zcmMva2V5Ym9hcmRVdGlscy5qcyIsIndlYnBhY2s6Ly9wb3J0dWd1ZXNlLWdhbWUvLi9zcmMvc3BlYWsuanMiLCJ3ZWJwYWNrOi8vcG9ydHVndWVzZS1nYW1lLy4vc3JjL3N0b3Jlcy9CYXNlU3RvcmUuanMiLCJ3ZWJwYWNrOi8vcG9ydHVndWVzZS1nYW1lLy4vc3JjL3N0b3Jlcy9PcHRpb25zU3RvcmUuanMiLCJ3ZWJwYWNrOi8vcG9ydHVndWVzZS1nYW1lLy4vc3JjL3N0b3Jlcy9RdWVzdGlvbnNTdG9yZS5qcyIsIndlYnBhY2s6Ly9wb3J0dWd1ZXNlLWdhbWUvLi9zcmMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vcG9ydHVndWVzZS1nYW1lL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3BvcnR1Z3Vlc2UtZ2FtZS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vcG9ydHVndWVzZS1nYW1lL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vcG9ydHVndWVzZS1nYW1lL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vcG9ydHVndWVzZS1nYW1lLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IHt2ZXI6e3ByZXNlbnQ6W3twcjonZXUgdmVqbyBvIHNvbCB0b2RvcyBvcyBkaWFzJyxlbjonSSBzZWUgdGhlIHN1biBldmVyeSBkYXknfSx7cHI6J2VsZSB2w6ogb3MgcMOhc3Nhcm9zIHZvYW5kbycsZW46J2hlIHNlZXMgdGhlIGJpcmRzIGZseWluZyd9LHtwcjonbsOzcyB2ZW1vcyBvIG1hciBkYXF1aScsZW46J3dlIHNlZSB0aGUgc2VhIGZyb20gaGVyZSd9LHtwcjonZWxlcyB2ZWVtIG9zIGFuaW1haXMgbmEgZmxvcmVzdGEnLGVuOid0aGV5IHNlZSB0aGUgYW5pbWFscyBpbiB0aGUgZm9yZXN0J31dLGltcGVyZmVjdDpbe3ByOidldSB2aWEgb3MgY2Fycm9zIHBhc3NhcmVtIG5hIHJ1YScsZW46J0kgdXNlZCB0byBzZWUgdGhlIGNhcnMgcGFzc2luZyBpbiB0aGUgcm9hZCd9LHtwcjonZWxlIHZpYSBvcyBhbmltYWlzIG5hIGZsb3Jlc3RhJyxlbjonaGUgdXNlZCB0byBzZWUgdGhlIGFuaW1hbHMgaW4gdGhlIGZvcmVzdCd9LHtwcjonbsOzcyB2w61hbW9zIG8gcMO0ciBkbyBzb2wgbmEgcHJhaWEnLGVuOid3ZSB1c2VkIHRvIHNlZSB0aGUgc3Vuc2V0IG9uIHRoZSBiZWFjaCd9LHtwcjonZWxlcyB2aWFtIGEgbHVhIG5vIGPDqXUnLGVuOid0aGV5IHVzZWQgdG8gc2VlIHRoZSBtb29uIGluIHRoZSBza3knfV0scHJldGVyaXRlOlt7cHI6J2V1IHZpIG8gZmlsbWUgb250ZW0nLGVuOidJIHNhdyB0aGUgZmlsbSB5ZXN0ZXJkYXknfSx7cHI6J2VsZSB2aXUgbyB0cmVtIHBhc3NhcicsZW46J2hlIHNhdyB0aGUgdHJhaW4gcGFzcyd9LHtwcjonbsOzcyB2aW1vcyBvIG1hciBhZ2l0YWRvJyxlbjond2Ugc2F3IHRoZSByb3VnaCBzZWEnfSx7cHI6J2VsZXMgdmlyYW0gbyBlY2xpcHNlIGRhIGx1YScsZW46J3RoZXkgc2F3IHRoZSBlY2xpcHNlIG9mIHRoZSBtb29uJ31dLHByZXNlbnRQZXJmZWN0Olt7cHI6J2V1IHRlbmhvIHZpc3RvIG11aXRvcyBmaWxtZXMgYm9ucycsZW46J0kgaGF2ZSBzZWVuIG1hbnkgZ29vZCBmaWxtcyd9LHtwcjonZWxlIHRlbSB2aXN0byBtdWl0YXMgZXN0cmVsYXMgw6Agbm9pdGUnLGVuOidoZSBoYXMgc2VlbiBtYW55IHN0YXJzIGF0IG5pZ2h0J30se3ByOiduw7NzIHRlbW9zIHZpc3RvIG8gcMO0ciBkbyBzb2wganVudG9zJyxlbjond2UgaGF2ZSBzZWVuIHRoZSBzdW5zZXQgdG9nZXRoZXInfSx7cHI6J2VsZXMgdMOqbSB2aXN0byBvcyBmb2dvcyBkZSBhcnRpZsOtY2lvIG5vIGPDqXUnLGVuOid0aGV5IGhhdmUgc2VlbiB0aGUgZmlyZXdvcmtzIGluIHRoZSBza3knfV0sZnV0dXJlOlt7cHI6J2V1IHZlcmVpIG8gbmFzY2VyIGRvIHNvbCBhbWFuaMOjJyxlbjonSSB3aWxsIHNlZSB0aGUgc3VucmlzZSB0b21vcnJvdyd9LHtwcjonZWxlIHZlcsOhIG9zIGZvZ29zIGRlIGFydGlmw61jaW8gbm8gcmV2ZWlsbG9uJyxlbjonSGUgd2lsbCBzZWUgdGhlIGZpcmV3b3JrcyBvbiBOZXcgWWVhclxcJ3MgRXZlJ30se3ByOiduw7NzIHZlcmVtb3MgbyBtYXIgYXp1bCBuYSB2aWFnZW0nLGVuOid3ZSB3aWxsIHNlZSB0aGUgYmx1ZSBzZWEgb24gdGhlIGpvdXJuZXknfSx7cHI6J2VsZXMgdmVyw6NvIGFzIGZsb3JlcyBubyBqYXJkaW0nLGVuOid0aGV5IHdpbGwgc2VlIHRoZSBmbG93ZXJzIGluIHRoZSBnYXJkZW4nfV0scHJlc2VudFN1Ymp1bmN0aXZlOlt7cHI6J3ZvY8OqIHF1ZXIgcXVlIGV1ICoqdmVqYSoqIHF1YWwgw6kgbyBwcm9ibGVtYT8nLGVuOidkbyB5b3Ugd2FudCBtZSAqKnRvIHNlZSoqIHdoYXQgdGhlIHByb2JsZW0gaXM/J30se3ByOid2b2PDqiBxdWVyIHF1ZSB1bSBtZWNoYW5pY2EgKip2ZWphKiogcXVhbCDDqSBvIHByb2JsZW1hPycsZW46J2RvIHlvdSB3YW50IGEgbWVjaGFuaWMgKip0byBzZWUqKiB3aGF0IHRoZSBwcm9ibGVtIGlzPyd9LHtwcjondm9jw6ogcXVlciBxdWUgbsOzcyAqKnZlamFtb3MqKiBxdWFsIMOpIG8gcHJvYmxlbWE/JyxlbjonZG8geW91IHdhbnQgdXMgKip0byBzZWUqKiB3aGF0IHRoZSBwcm9ibGVtIGlzPyd9LHtwcjondm9jw6ogcXVlciBxdWUgZWxlcyAqKnZlamFtKiogcXVhbCDDqSBvIHByb2JsZW1hPycsZW46J2RvIHlvdSB3YW50IHRoZW0gKip0byBzZWUqKiB3aGF0IHRoZSBwcm9ibGVtIGlzPyd9XX0sdmlyOntwcmVzZW50Olt7cHI6J2V1IHZlbmhvIHNlbXByZSBhbyBwYXJxdWUnLGVuOidJIGFsd2F5cyBjb21lIHRvIHRoZSBwYXJrJ30se3ByOidldSB0ZW5obyBzYXRpc2Zhw6fDo28gcXVhbmRvIGV1IHZlbmhvIGFxdWknLGVuOidJIGhhdmUgc2F0aXNmYWN0aW9uIHdoZW4gSSBjb21lIGhlcmUnfSx7cHI6J2VsYSB2ZW0gbWFpcyB0YXJkZScsZW46J3NoZSBjb21lcyBsYXRlcid9LHtwcjonbsOzcyB2aW1vcyBvIGZpbG1lIGp1bnRvcycsZW46J3dlIHNlZSB0aGUgZmlsbSB0b2dldGhlcid9LHtwcjonZWxlcyB2w6ptIGRlIGxvbmdlJyxlbjondGhleSBjb21lIGZyb20gYWZhcid9XSxpbXBlcmZlY3Q6W3twcjonZXUgdmluaGEgYW8gcGFycXVlIHRvZG9zIG9zIGRpYXMnLGVuOidJIHVzZWQgdG8gY29tZSB0byB0aGUgcGFyayBldmVyeSBkYXknfSx7cHI6J2VsZSB2aW5oYSBsZXIgYXF1aSDDoCB0YXJkZScsZW46J2hlIHVzZWQgdG8gY29tZSByZWFkIGhlcmUgaW4gdGhlIGFmdGVybm9vbid9LHtwcjonbsOzcyB2aW5oYW1vcyBzZW1wcmUgYW50ZXMgZG8gamFudGFyJyxlbjond2UgdXNlZCB0byBhbHdheXMgY29tZSBiZWZvcmUgZGlubmVyJ30se3ByOidlbGVzIHZpbmhhbSBqb2dhciBmdXRlYm9sIHRvZGFzIGFzIHRhcmRlcycsZW46J3RoZXkgdXNlZCB0byBjb21lIHBsYXkgc29jY2VyIGV2ZXJ5IGFmdGVybm9vbid9XSxwcmV0ZXJpdGU6W3twcjonZXUgdmltIMOgIHByYWlhIGhvamUnLGVuOidJIGNhbWUgdG8gdGhlIGJlYWNoIHRvZGF5J30se3ByOidlbGUgdmVpbyBhanVkYXIgYSBhdsOzJyxlbjonaGUgY2FtZSB0byBoZWxwIGhpcyBncmFuZG1vdGhlcid9LHtwcjonbsOzcyB2aWVtb3MgYWxtb8OnYXIgY29udGlnbycsZW46J3dlIGNhbWUgdG8gaGF2ZSBsdW5jaCB3aXRoIHlvdSd9LHtwcjonZWxlcyB2aWVyYW0gcsOhcGlkbyBkZW1haXMnLGVuOid0aGV5IGNhbWUgdG9vIGZhc3QnfV0scHJlc2VudFBlcmZlY3Q6W3twcjonZXUgdGVobm8gdmluZG8gYXF1aSBjb20gZnJlcXXDqm5jaWEnLGVuOidJIGhhdmUgYmVlbiBjb21pbmcgaGVyZSBvZnRlbid9LHtwcjonZWxlIHRlbSB2aW5kbyBhanVkYXIgb3Mgb3V0cm9zJyxlbjonaGUgaGFzIGJlZW4gY29taW5nIHRvIGhlbHAgb3RoZXJzJ30se3ByOiduw7NzIHRlbW9zIHZpbmRvIHBhc3NlYXIgbm8gcGFycXVlJyxlbjond2UgaGF2ZSBiZWVuIGNvbWluZyBmb3IgYSB3YWxrIGluIHRoZSBwYXJrJ30se3ByOidlbGVzIHTDqm0gdmluZG8gYnJpbmNhciBubyBwYXJxdWUnLGVuOid0aGV5IGhhdmUgYmVlbiBjb21pbmcgdG8gcGxheSBpbiB0aGUgcGFyayd9XSxmdXR1cmU6W3twcjonZXUgdmlyZWkgYnVzY2FyIHZvY8OqIG1haXMgdGFyZGUnLGVuOidJIHdpbGwgY29tZSBmaW5kIHlvdSBsYXRlcid9LHtwcjonZWxlIHZpcsOhIGFqdWRhciBuYSBmZXN0YScsZW46J2hlIHdpbGwgY29tZSBoZWxwIGF0IHRoZSBwYXJ0eSd9LHtwcjonbsOzcyB2aXJlbW9zIGphbnRhciBqdW50b3MnLGVuOid3ZSB3aWxsIGNvbWUgdG8gZGlubmVyIHRvZ2V0aGVyJ30se3ByOidlbGVzIHZpcsOjbyBubyBwcsOzeGltbyBmaW5hbCBkZSBzZW1hbmEnLGVuOid0aGV5IHdpbGwgY29tZSBuZXh0IHdlZWtlbmQnfV0scHJlc2VudFN1Ymp1bmN0aXZlOlt7cHI6J8OJIG1lbGhvciBxdWUgZXUgKip2ZW5oYSoqIG1haXMgY2VkbyBhbWFuaMOjJyxlbjonSXQgaXMgYmV0dGVyIHRoYXQgSSAqKmNvbWUqKiBlYXJsaWVyIHRvbW9ycm93IFxcXFxuIF8oSSBiZXR0ZXIgY29tZSBlYXJseSB0b21vcnJvdylfJ30se3ByOifDiSBtZWxob3IgcXVlIHZvY8OqICoqdmVuaGEqKiBtYWlzIGNlZG8gYW1hbmjDoycsZW46J0l0IGlzIGJldHRlciB0aGF0IHlvdSAqKmNvbWUqKiBlYXJsaWVyIHRvbW9ycm93IFxcXFxuIF8oWW91IGJldHRlciBjb21lIGVhcmx5IHRvbW9ycm93KV8nfSx7cHI6J8OJIG1lbGhvciBxdWUgKip2ZW5oYW1vcyoqIG1haXMgY2VkbyBhbWFuaMOjJyxlbjonSXQgaXMgYmV0dGVyIHRoYXQgd2UgKipjb21lKiogZWFybGllciB0b21vcnJvdyBcXFxcbiBfKFdlIGJldHRlciBjb21lIGVhcmx5IHRvbW9ycm93KV8nfSx7cHI6J8OJIG1lbGhvciBxdWUgZWxlcyAqKnZlbmhhbSoqIG1haXMgY2VkbyBhbWFuaMOjJyxlbjonSXQgaXMgYmV0dGVyIHRoYXQgdGhleSAqKmNvbWUqKiBlYXJsaWVyIHRvbW9ycm93IFxcXFxuIF8oVGhleSBiZXR0ZXIgY29tZSBlYXJseSB0b21vcnJvdylfJ31dfSx2ZXJfYW5kX3Zpcjp7cHJlc2VudDpbe3ByOidzZW1wcmUgcXVlIGV1ICoqdmVuaG8qKiBhbyBqYXJkaW0sICoqdmVqbyoqIG11aXRhcyBmbG9yZXMnLGVuOid3aGVuIEkgKipjb21lKiogdG8gdGhlIGdhcmRlbiwgSSBhbHdheXMgKipzZWUqKiBtYW55IGZsb3dlcnMnfSx7cHI6J3NlbXByZSBxdWUgZWxlICoqdmVtKiogYW8gcGFycXVlLCAqKnbDqioqIGFsZ3VucyBwYXNzYXJvcycsZW46J3doZW4gaGUgKipjb21lcyoqIHRvIHRoZSBwYXJrLCBoZSBhbHdheXMgKipzZWVzKiogc29tZSBiaXJkcyd9LHtwcjonc2VtcHJlIHF1ZSBuw7NzICoqdmltb3MqKiBhIHByYWlhLCAqKnZlbW9zKiogY3JpYW7Dp2FzIGJyaW5jYW5kbycsZW46J3doZW4gd2UgKipjb21lKiogdG8gdGhlIGJlYWNoLCB3ZSBhbHdheXMgKipzZWUqKiBraWRzIHBsYXlpbmcnfSx7cHI6J3NlbXByZSBxdWUgZWxhcyAqKnbDqm0qKiBhIGZhdmVsYSwgKip2ZWVtKiogYWxndW5zIGNhY2hvcnJvcyBicmluY2FuZG8nLGVuOid3aGVuIHRoZXkgKipjb21lKiogdG8gdGhlIGZhdmVsYSwgdGhleSBhbHdheXMgKipzZWUqKiBzb21lIGRvZ3MgcGxheWluZyd9XSxpbXBlcmZlY3Q6W3twcjonQW50aWdhbWVudGUsIHF1YW5kbyBldSAqKnZpbmhhKiogYW8gcGFycXVlLCAqKnZpYSoqIG1haXMgZmFtw61saWFzIGZhemVuZG8gcGlxdWVuaXF1ZScsZW46J0luIHRoZSBwYXN0LCB3aGVuIEkgKipjYW1lKiogdG8gdGhlIHBhcmssIEkgKipzYXcqKiBtb3JlIGZhbWlsaWVzIGhhdmluZyBwaWNuaWNzJ30se3ByOidBbnRpZ2FtZW50ZSwgcXVhbmRvIGVsZSAqKnZpbmhhKiogYW8gcGFycXVlLCAqKnZpYSoqIG1haXMgY3JpYW7Dp2FzIGVtcGluYWRvIHBpcGEnLGVuOidJbiB0aGUgcGFzdCwgd2hlbiBoZSAqKmNhbWUqKiB0byB0aGUgcGFyaywgaGUgKipzYXcqKiBtb3JlIGtpZHMgZmx5aW5nIGtpdGVzJ30se3ByOidBbnRpZ2FtZW50ZSwgcXVhbmRvIG5vcyAqKnbDrW5oYW1vcyoqIGFvIHBhcnF1ZSwgKip2w61hbW9zKiogbWFpcyBjcmlhbsOnYXMgcHVsYW5kbyBjb3JkYScsZW46J0luIHRoZSBwYXN0LCB3aGVuIHdlICoqY2FtZSoqIHRvIHRoZSBwYXJrLCB3ZSAqKnNhdyoqIG1vcmUga2lkcyBqdW1waW5nIHJvcGUnfSx7cHI6J0FudGlnYW1lbnRlLCBxdWFuZG8gZWxlcyAqKnZpbmhhbSoqIGFvIHBhcnF1ZSwgKip2aWFtKiogbWFpcyBjcmlhbsOnYXMgYnJpbmNhbmRvJyxlbjonSW4gdGhlIHBhc3QsIHdoZW4gdGhleSAqKmNhbWUqKiB0byB0aGUgcGFyaywgdGhleSAqKnNhdyoqIG1vcmUga2lkcyBwbGF5aW5nJ31dLHByZXRlcml0ZTpbe3ByOidPbnRlbSwgcXVhbmRvICoqdmltKiogYW8gcGFycXVlLCBldSAqKnZpKiogdW1hIGNhcGl2YXJhJyxlbjonWWVzdGVyZGF5LCB3aGVuIEkgKipjYW1lKiogdG8gdGhlIHBhcmssIEkgKipzYXcqKiBhIGNhcHliYXJhJ30se3ByOidPbnRlbSwgcXVhbmRvICoqdmVpbyoqIGEgZmxvcmVzdGEsIGVsZSAqKnZpdSoqIHVtIHVyc28nLGVuOidZZXN0ZXJkYXksIHdoZW4gaGUgKipjYW1lKiogdG8gdGhlIGZvcmVzdCwgaGUgKipzYXcqKiBhIGJlYXInfSx7cHI6J09udGVtLCBxdWFuZG8gKip2aWVtb3MqKiBhbyBqYXJkaW0sIG5vcyAqKnZpbW9zKiogdW1hIGZsb3IgbWFyYXZpbGhvc2EnLGVuOidZZXN0ZXJkYXksIHdoZW4gd2UgKipjYW1lKiogdG8gdGhlIGdhcmRlbiwgd2UgKipzYXcqKiBhbiBhbWF6aW5nIGZsb3dlcid9LHtwcjonT250ZW0sIHF1YW5kbyAqKnZpZXJhbSoqIGEgY2lkYWRlLCBlbGVzICoqdmlyYW0qKiB1bSBkZXNmaWxlJyxlbjonWWVzdGVyZGF5LCB3aGVuIHRoZXkgKipjYW1lKiogdG8gdGhlIGNpdHksIHRoZXkgKipzYXcqKiBhIHBhcmFkZSd9LHtwcjonRXUgKip2aW0qKiDDoCBjaWRhZGUgZSAqKnZpKiogbWV1IGZpbGhvJyxlbjonSSAqKmNhbWUqKiB0byB0aGUgY2l0eSBhbmQgKipzYXcqKiBteSBzb24nfSx7cHI6J0VsZSAqKnZlaW8qKiDDoCBmZXN0YSBlICoqdml1Kiogc3VhIG5hbW9yYWRhJyxlbjonSGUgKipjYW1lKiogdG8gdGhlIGNpdHkgYW5kICoqc2F3KiogaGlzIGdpcmxmcmllbmQnfV19fTsiLCJleHBvcnQgZGVmYXVsdCBbe3ByOidTb2NvcnJvIScsZW46J0hlbHAhJ30se3ByOidTdW5nYScsZW46J1N3aW1zdWl0J30se3ByOidDb21wcm9taXNzbycsZW46J01lZXRpbmcnfV07IiwiZXhwb3J0IGRlZmF1bHQgW3twcjonRWxlIMOpIHVtIGNvbGVjaW9uYWRvciBxdWUgY29sZWNpb25hIGl0ZW5zJyxlbjonSGUgaXMgYSBjb2xsZWN0b3Igd2hvIGNvbGxlY3RzIGl0ZW1zJ30se3ByOidUZW5obyB1bWEgY29sZcOnw6NvJyxlbjonSSBoYXZlIGEgY29sbGVjdGlvbid9LHtwcjonVm91ICoqZ2FuaGFyKiogbWFpcyBkaW5oZWlybyBuYXF1ZWxhIGhvcmEnLGVuOidJIHdpbGwgKipnZXQqKiBtb3JlIG1vbmV5IGF0IHRoYXQgdGltZSd9LHtwcjonRm9pIGVzY3VybyBsw6EgZm9yYScsZW46J0l0IHdhcyBkYXJrIG91dHNpZGUnfSx7cHI6J0VzdMOhIGZpY2FuZG8gb3NjdXJvIGzDoSBmb3JhJyxlbjonSXQgaXMgZ2V0dGluZyBkYXJrIG91dHNpZGUnfSx7cHI6J1ZlbmhhIG1lIGNvbmhlY2VyIGFsZ3VtIGRpYScsZW46J0NvbWUgYW5kIG1lZXQgbWUgc29tZSBkYXknfSx7cHI6J1ZlbmhhIG1lIHZlciBhbGd1bSBkaWEnLGVuOidDb21lIGFuZCBzZWUgbWUgc29tZSBkYXknfSx7cHI6J07Do28gcGVyY2EgYSBmw6knLGVuOidEbyBub3QgbG9zZSBmYWl0aCd9LHtwcjonRWxlIG7Do28gcGVyZGUgYSBmw6knLGVuOidIZSBkb2VzIG5vdCBsb3NlIGZhaXRoJ30se3ByOidFbGEgbWUgYXByZXNlbnRvdSBhbyBzZXUgbmFtb3JhZG8gbmEgZmVzdGEnLGVuOidTaGUgaW50cm9kdWNlZCBtZSB0byBoZXIgYm95ZnJpZW5kIGF0IHRoZSBwYXJ0eSd9LHtwcjonRWxlIGxldm91IG1ldSBjYXNhY28nLGVuOidIZSB0b29rIG15IGNvYXQnfSx7cHI6J0V1IHRlIGRvdSBlc3RlIHJlbMOzZ2lvIGNvbW8gdW0gcHJlc2VudGUnLGVuOidJIGdpdmUgdGhpcyB3YXRjaCB0byB5b3UgYXMgYSBnaWZ0J30se3ByOidFdSBzb25oZWkgdW0gc29uaG8gZGUgdW0gdGVtcG8gcGFzc2FkbycsZW46J0kgZHJlYW1lZCBhIGRyZWFtIG9mIHRpbWUgZ29uZSBieSd9LHtwcjonRXUgbWUgZGl2ZXJ0aSBtdWl0bycsZW46J0kgaGFkIGEgZ29vZCB0aW1lJ30se3ByOidGb2kgdW0gYm9tIG1vbWVudG8nLGVuOidJdCB3YXMgYSBnb29kIHRpbWUnfSx7cHI6J0VsZSB2ZWlvIGRlIGxvbmdlJyxlbjonSGUgY2FtZSBmcm9tIGZhciBhd2F5J30se3ByOidFc3RvdSB2aW5kbycsZW46J0kgYW0gY29taW5nJ30se3ByOidDb250aW51ZSBlbSBmcmVudGUsIHBvciBmYXZvcicsZW46J0tlZXAgZ29pbmcgZm9yd2FyZCwgcGxlYXNlJ30se3ByOidBIGx1eiDDqSBicmlsaGFudGUnLGVuOidUaGUgbGlnaHQgaXMgYnJpZ2h0J30se3ByOifDiSBmYXZvcsOhdmVsIHBhcmEgbsOzcyBpcm1vcycsZW46J0l0IGlzIGZhdm9yYWJsZSBmb3IgdXMgdG8gZ28nfSx7cHI6J0V1IHBlbnNlaSBxdWUgbm9zc28gKipjb21wcm9taXNzbyoqIHNlcmlhIG5hIHNlbWFuYSBxdWUgdmVtJyxlbjonSSB0aG91Z2h0IHRoYXQgb3VyICoqbWVldGluZyoqIHdhcyBuZXh0IHdlZWsnfSx7cHI6J0lzc28gbsOjbyBxdWVyIGRpemVyIG5hZGEnLGVuOidUaGlzIGRvZXNuXFwndCBtZWFuIGFueXRoaW5nJ30se3ByOidFbGVzIG1lICoqZMOjbyoqIGFycm96JyxlbjonVGhleSAqKmdpdmUqKiBtZSByaWNlJ30se3ByOidFbGUgbsOjbyBkZXZlIHZpciBhcXVpIG5vdmFtZW50ZScsZW46J0hlIG11c3Qgbm90IGNvbWUgaGVyZSBhZ2Fpbid9LHtwcjonSMOhIG91dHJvcyBmYXRvcmVzIHF1ZSBub3MgZmF6ZW0gcGVuc2FyIGFzc2ltJyxlbjonVGhlcmUgYXJlIG90aGVyIGZhY3RvcnMgdGhhdCBtYWtlIHVzIHRoaW5rIGxpa2UgdGhhdCd9LHtwcjonRWxhIG5vcyBleHBsb3JhJyxlbjonU2hlIGV4cGxvaXRzIHVzJ30se3ByOidPIHJlc3RhdXJhbnRlIGZpY2EgZW0gZnJlbnRlIMOgIGVzY29sYScsZW46J1RoZSByZXN0YXVyYW50IGlzIGluIGZyb250IG9mIHRoZSBzY2hvb2wnfSx7cHI6J0VzdGUgw6kgbWV1IHRpcG8gZGUgcGVyc29uYWdlbScsZW46J1RoaXMgaXMgbXkgdHlwZSBvZiBjaGFyYWN0ZXInfSx7cHI6J0V1IG7Do28gdmVqbyBtaW5oYSBuYW1vcmFkYSBow6EgZHVhcyBzZW1hbmFzJyxlbjonSSBoYXZlIG5vdCBzZWVuIG15IGdpcmxmcmllbmQgZm9yIHR3byB3ZWVrcyd9LHtwcjonQ29tbyB0ZW0gcGFzc2FkbyBvIHNldSBwYWk/JyxlbjonSG93IGhhcyB5b3VyIGZhdGhlciBiZWVuPyd9LHtwcjonTWV1IGZpbGhvIHRlbSBtZSBwZXJndW50YWRvICoqY29pc2FzIGVzdHJhbmhhcyoqJyxlbjonTXkgc29uIGhhcyBiZWVuIGFza2luZyBtZSAqKnN0cmFuZ2UgcXVlc3Rpb25zKionfSx7cHI6J1RlbnRlIGRlc2NvYnJpciBzZSB0dWRvIHF1ZSBlbGUgZGlzc2Ugw6kgdmVyZGFkZScsZW46J1RyeSB0byBmaW5kIG91dCBpZiBldmVyeXRoaW5nIHRoYXQgaGUgc2FpZCBpcyB0cnVlJ30se3ByOidFbGUgbWUgY29udGEgdHVkbycsZW46J0hlIHRlbGxzIG1lIGV2ZXJ5dGhpbmcnfSx7cHI6J0V1IHNlZ3VyZWkgdW0gYmViw6kgZW0gbWV1cyBicmHDp29zJyxlbjonSSBoZWxkIGEgYmFieSBpbiBteSBhcm1zJ31dOyIsIlxuZXhwb3J0IGNvbnN0IExvZ2dlciA9IHtcbiAgX2VuYWJsZWQ6IGZhbHNlLFxuICBfZGVidWc6IGZhbHNlLFxuXG4gIGVuYWJsZSgpIHtcbiAgICBMb2dnZXIuX2VuYWJsZWQgPSB0cnVlO1xuICB9LFxuXG4gIGRpc2FibGUoKSB7XG4gICAgTG9nZ2VyLl9lbmFibGVkID0gZmFsc2U7XG4gIH0sXG5cbiAgZW5hYmxlRGVidWcoKSB7XG4gICAgTG9nZ2VyLl9kZWJ1ZyA9IHRydWU7XG4gIH0sXG5cbiAgZGlzYWJsZURlYnVnKCkge1xuICAgIExvZ2dlci5fZGVidWcgPSBmYWxzZTtcbiAgfSxcblxuICBkZWJ1ZyguLi5hcmdzKSB7XG4gICAgaWYgKCFMb2dnZXIuX2VuYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFMb2dnZXIuX2RlYnVnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKC4uLmFyZ3MpO1xuICB9LFxuXG4gIGluZm8oLi4uYXJncykge1xuICAgIGlmICghTG9nZ2VyLl9lbmFibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKC4uLmFyZ3MpO1xuICB9LFxuXG4gIHdhcm4oLi4uYXJncykge1xuICAgIGlmICghTG9nZ2VyLl9lbmFibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnNvbGUud2FybiguLi5hcmdzKTtcbiAgfSxcblxuICBlcnJvciguLi5hcmdzKSB7XG4gICAgLy8gYWx3YXlzIHNob3cgZXJyb3JzXG4gICAgY29uc29sZS5lcnJvciguLi5hcmdzKTtcbiAgfSxcbn1cbiIsIid1c2Ugc3RyaWN0J1xuXG5pbXBvcnQgY29uaiBmcm9tICcuL3Jlc291cmNlcy9jb25qdWdhdGlvbi12ZXItdmlyLnlhbWwnO1xuaW1wb3J0IHdlYWtQaHJhc2VzIGZyb20gJy4vcmVzb3VyY2VzL3dlYWstcGhyYXNlcy55YW1sJztcbmltcG9ydCB2b2NhYiBmcm9tICcuL3Jlc291cmNlcy92b2NhYi55YW1sJztcblxuaW1wb3J0IHsgRVhFUkNJU0UsIE1PREUsIE9ORV9IT1VSX01TLCBPUkRFUiB9IGZyb20gJy4vY29uc3RhbnRzJztcbmltcG9ydCB7IGlzQ2hhclByZXNzZWQsIFNwZWNpYWxLZXkgfSBmcm9tICcuL2tleWJvYXJkVXRpbHMnO1xuaW1wb3J0IHsgTG9nZ2VyIH0gZnJvbSAnLi9Mb2dnZXInO1xuaW1wb3J0IHsgc3BlYWsgfSBmcm9tICcuL3NwZWFrJztcbmltcG9ydCB7IG9wdGlvbnNTdG9yZSB9IGZyb20gJy4vc3RvcmVzL09wdGlvbnNTdG9yZSc7XG5pbXBvcnQgeyBxdWVzdGlvbnNTdG9yZSB9IGZyb20gJy4vc3RvcmVzL1F1ZXN0aW9uc1N0b3JlJztcbmltcG9ydCB7IGFzc2VydCwgZ2V0UmFuZG9tRWxlbWVudCwgbWFya2lmeVRleHQsIHJlbW92ZUFycmF5RWxlbWVudCwgcmVxdWlyZUJ5SWQsIHJlcXVpcmVGaXJzdENoaWxkLCBzaGEyNTYsIHNodWZmbGVBcnJheSB9IGZyb20gJy4vdXRpbHMnO1xuXG5Mb2dnZXIuZW5hYmxlKCk7XG5Mb2dnZXIuZGlzYWJsZURlYnVnKCk7XG5cbmNvbnN0IG1haW5Ob2RlID0gcmVxdWlyZUJ5SWQoJ21haW4nKTtcbmNvbnN0IGNhcmRRdWVzdGlvbiA9IHJlcXVpcmVCeUlkKCdjYXJkLXF1ZXN0aW9uJyk7XG5jb25zdCBjYXJkQW5zd2VyID0gcmVxdWlyZUJ5SWQoJ2NhcmQtYW5zd2VyJyk7XG5jb25zdCBjYXJkUXVlc3Rpb25Db250ZW50ID0gcmVxdWlyZUZpcnN0Q2hpbGQoY2FyZFF1ZXN0aW9uKVxuY29uc3QgY2FyZEFuc3dlckNvbnRlbnQgPSByZXF1aXJlRmlyc3RDaGlsZChjYXJkQW5zd2VyKVxuXG5hc3NlcnQoY2FyZFF1ZXN0aW9uQ29udGVudCwgJ2NhcmRRdWVzdGlvbkNvbnRlbnQgZG9lcyBub3QgZXhpc3QnKTtcbmFzc2VydChjYXJkQW5zd2VyQ29udGVudCwgJ2NhcmRBbnN3ZXJDb250ZW50IGRvZXMgbm90IGV4aXN0Jyk7XG5cbmNvbnN0IGJ1dHRvblByZXYgPSByZXF1aXJlQnlJZCgnYnV0dG9uLXByZXYnKTtcbmNvbnN0IGJ1dHRvbk5leHQgPSByZXF1aXJlQnlJZCgnYnV0dG9uLW5leHQnKTtcbmNvbnN0IGJ1dHRvblJlc2h1ZmZsZSA9IHJlcXVpcmVCeUlkKCdidXR0b24tcmVzaHVmZmxlJyk7XG5jb25zdCBidXR0b25TcGVhayA9IHJlcXVpcmVCeUlkKCdidXR0b24tc3BlYWsnKTtcbmNvbnN0IGJ1dHRvblNub296ZTFoID0gcmVxdWlyZUJ5SWQoJ2J1dHRvbi1zbm9vemUtMWgnKTtcbmNvbnN0IGJ1dHRvblNub296ZTdkID0gcmVxdWlyZUJ5SWQoJ2J1dHRvbi1zbm9vemUtN2QnKTtcbmNvbnN0IGJ1dHRvblNub296ZTMwZCA9IHJlcXVpcmVCeUlkKCdidXR0b24tc25vb3plLTMwZCcpO1xuY29uc3QgYnV0dG9uVW5zbm9vemUgPSByZXF1aXJlQnlJZCgnYnV0dG9uLXVuc25vb3plJyk7XG5jb25zdCBwcm9ncmVzcyA9IHJlcXVpcmVCeUlkKCdwcm9ncmVzcycpO1xuY29uc3QgZm9ybVF1ZXN0aW9uT3JkZXIgPSByZXF1aXJlQnlJZCgnZm9ybS1xdWVzdGlvbi1vcmRlcicpO1xuY29uc3QgZm9ybVNlbGVjdEV4ZXJjaXNlcyA9IHJlcXVpcmVCeUlkKCdmb3JtLXNlbGVjdC1leGVyY2lzZXMnKTtcbmNvbnN0IGZvcm1TZWxlY3RNb2RlID0gcmVxdWlyZUJ5SWQoJ2Zvcm0tc2VsZWN0LW1vZGUnKTtcbmNvbnN0IHNwZWVjaFN0YXR1cyA9IHJlcXVpcmVCeUlkKCdzcGVlY2gtc3RhdHVzJyk7XG5cbi8qKlxuICogQHR5cGVkZWYge3twcjogc3RyaW5nLCBlbjogc3RyaW5nfX0gVHJhbnNsYXRpb25QYWlyXG4gKi9cblxuLyoqXG4gKiBQcm9ibGVtIFR1cGxlIC0+IGBbcXVlc3Rpb24sIGFuc3dlciwgcG9ydHVndWVzZS1pbmRleC1mb3ItdGV4dC10by1zcGVlY2gsIGhhc2hdYFxuICogQHR5cGVkZWYge1tzdHJpbmcsIHN0cmluZywgbnVtYmVyXXxbc3RyaW5nLCBzdHJpbmcsIG51bWJlciwgc3RyaW5nXX0gUHJvYmxlbVxuICovXG5cbi8qKiBAdHlwZSB7eyByZXZlYWxlZDogYm9vbGVhbiwgcHJvYmxlbXM6IFByb2JsZW1bXSwgaW5kZXg6IG51bWJlciB9fSBTdGF0ZSAqL1xuY29uc3Qgc3RhdGUgPSB7XG4gIHJldmVhbGVkOiBmYWxzZSxcbiAgcHJvYmxlbXM6IFtdLFxuICBpbmRleDogMCxcbn07XG5cbmZ1bmN0aW9uIG1haW4oKSB7XG4gIHJlbmRlck9wdGlvbnMoKTtcbiAgc2h1ZmZsZVF1ZXN0aW9ucygpO1xuICBzZXR1cExpc3RlbmVycygpO1xufVxuXG5mdW5jdGlvbiByYW5kQm9vbCgpIHtcbiAgcmV0dXJuIE1hdGgucmFuZG9tKCkgPj0gMC41XG59XG5cbmZ1bmN0aW9uIHNodWZmbGVRdWVzdGlvbnMoKSB7XG4gIHN0YXRlLnJldmVhbGVkID0gZmFsc2U7XG4gIHN0YXRlLnByb2JsZW1zID0gW107XG4gIHN0YXRlLmluZGV4ID0gMDtcbiAgLyoqIEB0eXBlIHtQcm9ibGVtW119ICovXG4gIGNvbnN0IHByb2JsZW1zID0gW11cbiAgLyoqIEBwYXJhbSB7VHJhbnNsYXRpb25QYWlyfSB0cmFucyAqL1xuICBjb25zdCBhZGRQcm9ibGVtID0gKHRyYW5zKSA9PiB7XG4gICAgaWYgKCF0cmFucy5lbiB8fCAhdHJhbnMucHIpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgUHJvYmxlbSBpcyBpbnZhbGlkOiAke0pTT04uc3RyaW5naWZ5KHRyYW5zKX1gKVxuICAgIH1cbiAgICBjb25zdCBvcmRlciA9IG9wdGlvbnNTdG9yZS5nZXRPcmRlcigpO1xuICAgIGlmIChvcmRlciA9PT0gT1JERVIuRU5fRklSU1QpIHtcbiAgICAgIHByb2JsZW1zLnB1c2goW3RyYW5zLmVuLCB0cmFucy5wciwgMV0pO1xuICAgIH0gZWxzZSBpZiAob3JkZXIgPT09IE9SREVSLlBSX0ZJUlNUKSB7XG4gICAgICBwcm9ibGVtcy5wdXNoKFt0cmFucy5wciwgdHJhbnMuZW4sIDBdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZmxpcCA9IHJhbmRCb29sKCk7XG4gICAgICBpZiAoZmxpcCkge1xuICAgICAgICBwcm9ibGVtcy5wdXNoKFt0cmFucy5lbiwgdHJhbnMucHIsIDFdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb2JsZW1zLnB1c2goW3RyYW5zLnByLCB0cmFucy5lbiwgMF0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHNlbGVjdGVkRXhlcmNpc2VzID0gb3B0aW9uc1N0b3JlLmdldFNlbGVjdGVkRXhlcmNpc2VzKClcblxuICBpZiAoc2VsZWN0ZWRFeGVyY2lzZXNbRVhFUkNJU0UuVkVSX0NPTkpBVElPTl0pIHtcbiAgICBjb25qLnZlci5wcmVzZW50LmZvckVhY2goYWRkUHJvYmxlbSk7XG4gICAgY29uai52ZXIucHJldGVyaXRlLmZvckVhY2goYWRkUHJvYmxlbSk7XG4gICAgY29uai52ZXIuaW1wZXJmZWN0LmZvckVhY2goYWRkUHJvYmxlbSk7XG4gICAgY29uai52ZXIucHJlc2VudFBlcmZlY3QuZm9yRWFjaChhZGRQcm9ibGVtKTtcbiAgICBjb25qLnZlci5mdXR1cmUuZm9yRWFjaChhZGRQcm9ibGVtKTtcbiAgICBjb25qLnZlci5wcmVzZW50U3VianVuY3RpdmUuZm9yRWFjaChhZGRQcm9ibGVtKTtcbiAgfVxuXG4gIGlmIChzZWxlY3RlZEV4ZXJjaXNlc1tFWEVSQ0lTRS5WSVJfQ09OSlVHQVRJT05dKSB7XG4gICAgY29uai52aXIucHJlc2VudC5mb3JFYWNoKGFkZFByb2JsZW0pO1xuICAgIGNvbmoudmlyLnByZXRlcml0ZS5mb3JFYWNoKGFkZFByb2JsZW0pO1xuICAgIGNvbmoudmlyLmltcGVyZmVjdC5mb3JFYWNoKGFkZFByb2JsZW0pO1xuICAgIGNvbmoudmlyLnByZXNlbnRQZXJmZWN0LmZvckVhY2goYWRkUHJvYmxlbSk7XG4gICAgY29uai52aXIuZnV0dXJlLmZvckVhY2goYWRkUHJvYmxlbSk7XG4gICAgY29uai52aXIucHJlc2VudFN1Ymp1bmN0aXZlLmZvckVhY2goYWRkUHJvYmxlbSk7XG4gIH1cblxuICBpZiAoc2VsZWN0ZWRFeGVyY2lzZXNbRVhFUkNJU0UuVkVSX0FORF9WSVJdKSB7XG4gICAgY29uai52ZXJfYW5kX3Zpci5wcmVzZW50LmZvckVhY2goYWRkUHJvYmxlbSk7XG4gICAgY29uai52ZXJfYW5kX3Zpci5wcmV0ZXJpdGUuZm9yRWFjaChhZGRQcm9ibGVtKTtcbiAgICBjb25qLnZlcl9hbmRfdmlyLmltcGVyZmVjdC5mb3JFYWNoKGFkZFByb2JsZW0pO1xuICB9XG5cbiAgaWYgKHNlbGVjdGVkRXhlcmNpc2VzW0VYRVJDSVNFLldFQUtfUEhSQVNFU10pIHtcbiAgICB3ZWFrUGhyYXNlcy5mb3JFYWNoKGFkZFByb2JsZW0pO1xuICB9XG5cbiAgaWYgKHNlbGVjdGVkRXhlcmNpc2VzW0VYRVJDSVNFLlZPQ0FCXSkge1xuICAgIHZvY2FiLmZvckVhY2goYWRkUHJvYmxlbSk7XG4gIH1cblxuICBzdGF0ZS5wcm9ibGVtcyA9IHNodWZmbGVBcnJheShwcm9ibGVtcyk7XG5cbiAgcHJlcGFyZUhhc2hEYXRhKCgpID0+IHtcbiAgICByZW5kZXJDb250ZW50KCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBwbGF5VHJhbnNsYXRpb25BdWRpbygpIHtcbiAgY29uc3QgbnVtUHJvYmxlbXMgPSBzdGF0ZS5wcm9ibGVtcy5sZW5ndGhcbiAgaWYgKG51bVByb2JsZW1zID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGN1cnJlbnRJbmRleCA9IHN0YXRlLmluZGV4ICUgbnVtUHJvYmxlbXM7XG4gIGNvbnN0IGN1cnJlbnRQcm9ibGVtID0gc3RhdGUucHJvYmxlbXNbY3VycmVudEluZGV4XTtcbiAgLyoqIEB0eXBlIHtzdHJpbmd9ICovXG4gIC8vIEB0cy1pZ25vcmVcbiAgY29uc3QgcHRQaHJhc2UgPSBjdXJyZW50UHJvYmxlbVtjdXJyZW50UHJvYmxlbVsyXV1cbiAgY29uc3QgW3Nob3dTcGVha2luZ1N0YXR1cywgaGlkZVNwZWFraW5nU3RhdHVzXSA9IHByZXBhcmVTcGVha2luZ1N0YXR1cygpO1xuICBjb25zdCBkaWRTcGVhayA9IHNwZWFrKHB0UGhyYXNlLCAoKSA9PiBoaWRlU3BlYWtpbmdTdGF0dXMoKSk7XG4gIGlmIChkaWRTcGVhaykge1xuICAgIHNob3dTcGVha2luZ1N0YXR1cygpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFkdmFuY2UoKSB7XG4gIGlmIChzdGF0ZS5yZXZlYWxlZCkge1xuICAgIHN0YXRlLmluZGV4Kys7XG4gICAgc3RhdGUucmV2ZWFsZWQgPSBmYWxzZTtcbiAgICBjb25zdCBudW1Qcm9ibGVtcyA9IHN0YXRlLnByb2JsZW1zLmxlbmd0aFxuICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IHN0YXRlLmluZGV4ICUgbnVtUHJvYmxlbXM7XG4gICAgaWYgKGN1cnJlbnRJbmRleCA9PT0gMCkge1xuICAgICAgY2VsZWJyYXRlKCk7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zU3RvcmUuZ2V0TW9kZSgpID09PSBNT0RFLkxJU1RFTklORykge1xuICAgICAgcGxheVRyYW5zbGF0aW9uQXVkaW8oKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgc3RhdGUucmV2ZWFsZWQgPSB0cnVlO1xuICB9XG4gIHJlbmRlckNvbnRlbnQoKTtcbn1cblxuZnVuY3Rpb24gcmV3aW5kKCkge1xuICBzdGF0ZS5yZXZlYWxlZCA9IGZhbHNlO1xuICBzdGF0ZS5pbmRleC0tO1xuICBpZiAoc3RhdGUuaW5kZXggPCAwKSBzdGF0ZS5pbmRleCA9IHN0YXRlLnByb2JsZW1zLmxlbmd0aCAtIDE7XG4gIHJlbmRlckNvbnRlbnQoKTtcbn1cblxuZnVuY3Rpb24gc2V0dXBMaXN0ZW5lcnMoKSB7XG4gIGJ1dHRvbk5leHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhZHZhbmNlKTtcbiAgYnV0dG9uUHJldi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJld2luZCk7XG4gIGJ1dHRvblJlc2h1ZmZsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNodWZmbGVRdWVzdGlvbnMpO1xuICBidXR0b25TcGVhay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHBsYXlUcmFuc2xhdGlvbkF1ZGlvKTtcbiAgYnV0dG9uU25vb3plMWguYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDbGlja1Nub296ZSk7XG4gIGJ1dHRvblNub296ZTdkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2xpY2tTbm9vemUpO1xuICBidXR0b25Tbm9vemUzMGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDbGlja1Nub296ZSk7XG4gIGJ1dHRvblVuc25vb3plLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2xpY2tVbnNub296ZSk7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlQcmVzcyk7XG4gIC8vIEB0cy1pZ25vcmVcbiAgZm9ybVF1ZXN0aW9uT3JkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgaGFuZGxlUXVlc3Rpb25PcmRlckNoYW5nZSlcbiAgLy8gQHRzLWlnbm9yZVxuICBmb3JtU2VsZWN0RXhlcmNpc2VzLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGhhbmRsZVNlbGVjdEV4ZXJjaXNlQ2hhbmdlKVxuICAvLyBAdHMtaWdub3JlXG4gIGZvcm1TZWxlY3RNb2RlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGhhbmRsZVNlbGVjdE1vZGVDaGFuZ2UpXG59XG5cbi8qKlxuICogQHBhcmFtIHtLZXlib2FyZEV2ZW50fSBldlxuICovXG5mdW5jdGlvbiBoYW5kbGVLZXlQcmVzcyhldikge1xuICBpZiAoIWV2KSByZXR1cm47XG5cbiAgaWYgKGlzQ2hhclByZXNzZWQoZXYsIFNwZWNpYWxLZXkuQXJyb3dSaWdodCkpIHtcbiAgICBhZHZhbmNlKCk7XG4gICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgfSBlbHNlIGlmIChpc0NoYXJQcmVzc2VkKGV2LCBTcGVjaWFsS2V5LkFycm93TGVmdCkpIHtcbiAgICByZXdpbmQoKTtcbiAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICB9IGVsc2UgaWYgKGlzQ2hhclByZXNzZWQoZXYsIFNwZWNpYWxLZXkuU3BhY2UpKSB7XG4gICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICBwbGF5VHJhbnNsYXRpb25BdWRpbygpO1xuICB9IGVsc2UgaWYgKGlzQ2hhclByZXNzZWQoZXYsIFNwZWNpYWxLZXkuRW50ZXIpICYmIGV2LnNoaWZ0S2V5ICYmIGV2LmFsdEtleSkge1xuICAgIGNlbGVicmF0ZSgpO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtFdmVudCAmIHsgdGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50IH19IGV2XG4gKi9cbmZ1bmN0aW9uIGhhbmRsZVF1ZXN0aW9uT3JkZXJDaGFuZ2UoZXYpIHtcbiAgaWYgKCFldi50YXJnZXQpIHJldHVyblxuICAvLyBzdGF0ZS5vcmRlciA9IGV2LnRhcmdldC52YWx1ZTtcbiAgb3B0aW9uc1N0b3JlLnNldE9yZGVyKGV2LnRhcmdldC52YWx1ZSk7XG4gIHNodWZmbGVRdWVzdGlvbnMoKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0V2ZW50ICYgeyB0YXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnQgfX0gZXZcbiAqL1xuZnVuY3Rpb24gaGFuZGxlU2VsZWN0RXhlcmNpc2VDaGFuZ2UoZXYpIHtcbiAgb3B0aW9uc1N0b3JlLnNldFNlbGVjdGVkRXhlcmNpc2UoZXYudGFyZ2V0Lm5hbWUsIGV2LnRhcmdldC5jaGVja2VkKTtcbiAgc2h1ZmZsZVF1ZXN0aW9ucygpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RXZlbnQgJiB7IHRhcmdldDogSFRNTElucHV0RWxlbWVudCB9fSBldlxuICovXG5mdW5jdGlvbiBoYW5kbGVTZWxlY3RNb2RlQ2hhbmdlKGV2KSB7XG4gIG9wdGlvbnNTdG9yZS5zZXRNb2RlKGV2LnRhcmdldC52YWx1ZSk7XG4gIHNodWZmbGVRdWVzdGlvbnMoKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyp9IGV2XG4gKiBAcmV0dXJuc1xuICovXG5mdW5jdGlvbiBoYW5kbGVDbGlja1Nub296ZShldikge1xuICBjb25zdCBzZWNvbmRzID0gcGFyc2VJbnQoZXYuY3VycmVudFRhcmdldC5kYXRhc2V0LnNlY29uZHMsIDEwKSB8fCAwO1xuICBpZiAoIXNlY29uZHMpIHJldHVybjtcbiAgY29uc3Qgc25vb3plRHVyYXRpb25NcyA9IHNlY29uZHMgKiAxMDAwO1xuICBzbm9vemVDdXJyZW50UXVlc3Rpb24oc25vb3plRHVyYXRpb25Ncyk7XG4gIGlmIChvcHRpb25zU3RvcmUuZ2V0TW9kZSgpID09PSBNT0RFLkxJU1RFTklORykge1xuICAgIHBsYXlUcmFuc2xhdGlvbkF1ZGlvKCk7XG4gIH1cbiAgcmVuZGVyQ29udGVudCgpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7Kn0gZXZcbiAqL1xuZnVuY3Rpb24gaGFuZGxlQ2xpY2tVbnNub296ZShldikge1xuICBxdWVzdGlvbnNTdG9yZS51bnNub296ZUFsbFF1ZXN0aW9ucygpO1xuICBzaHVmZmxlUXVlc3Rpb25zKCk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlckNvbnRlbnQoKSB7XG4gIGNvbnN0IG51bVByb2JsZW1zID0gc3RhdGUucHJvYmxlbXMubGVuZ3RoXG5cbiAgaWYgKG51bVByb2JsZW1zID09PSAwKSB7XG4gICAgY2FyZFF1ZXN0aW9uQ29udGVudC5pbm5lckhUTUwgPSBcIlBsZWFzZSBzZWxlY3QgYW4gZXhlcmNpc2UgdG8gYmVnaW5cIjtcbiAgICBjYXJkQW5zd2VyQ29udGVudC5pbm5lckhUTUwgPSBcIlBvciBmYXZvciBzZWxlY2lvbmUgdW0gZXhlcmPDrWNpbyBwYXJhIGNvbWXDp2FyXCI7XG4gICAgY2FyZEFuc3dlci5jbGFzc0xpc3QuYWRkKCdyZXZlYWxlZCcpO1xuICAgIHByb2dyZXNzLmlubmVySFRNTCA9IFwiMCAvIDBcIjtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBjdXJyZW50SW5kZXggPSBzdGF0ZS5pbmRleCAlIG51bVByb2JsZW1zO1xuICBjb25zdCBwcm9ncmVzc1RleHQgPSBgJHtjdXJyZW50SW5kZXggKyAxfSAvICR7bnVtUHJvYmxlbXN9YFxuICBjb25zdCBjdXJyZW50UHJvYmxlbSA9IHN0YXRlLnByb2JsZW1zW2N1cnJlbnRJbmRleF07XG5cbiAgYXNzZXJ0KGN1cnJlbnRQcm9ibGVtLCBgY3VycmVudFByb2JsZW0gb3V0IG9mIGJvdW5kcyAtIHRyaWVkIGluZGV4ICR7Y3VycmVudEluZGV4fSBmb3IgYXJyYXkgb2YgbGVuZ3RoICR7bnVtUHJvYmxlbXN9YCk7XG4gIGlmICghY3VycmVudFByb2JsZW0pIHJldHVyblxuXG4gIGNhcmRRdWVzdGlvbkNvbnRlbnQuaW5uZXJIVE1MID0gbWFya2lmeVRleHQoY3VycmVudFByb2JsZW1bMF0pO1xuICBjYXJkQW5zd2VyQ29udGVudC5pbm5lckhUTUwgPSBtYXJraWZ5VGV4dChjdXJyZW50UHJvYmxlbVsxXSk7XG5cbiAgaWYgKHN0YXRlLnJldmVhbGVkKSB7XG4gICAgY2FyZFF1ZXN0aW9uLmNsYXNzTGlzdC5hZGQoJ3JldmVhbGVkJyk7XG4gICAgY2FyZEFuc3dlci5jbGFzc0xpc3QuYWRkKCdyZXZlYWxlZCcpO1xuICB9IGVsc2Uge1xuICAgIGNhcmRRdWVzdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdyZXZlYWxlZCcpO1xuICAgIGNhcmRBbnN3ZXIuY2xhc3NMaXN0LnJlbW92ZSgncmV2ZWFsZWQnKTtcbiAgfVxuXG4gIG1haW5Ob2RlLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGUtcmVhZGluZycpO1xuICBtYWluTm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdtb2RlLWxpc3RlbmluZycpXG4gIHN3aXRjaCAob3B0aW9uc1N0b3JlLmdldE1vZGUoKSkge1xuICAgIGNhc2UgTU9ERS5MSVNURU5JTkc6XG4gICAgICBtYWluTm9kZS5jbGFzc0xpc3QuYWRkKCdtb2RlLWxpc3RlbmluZycpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBNT0RFLlJFQURJTkc6XG4gICAgICBtYWluTm9kZS5jbGFzc0xpc3QuYWRkKCdtb2RlLXJlYWRpbmcnKTtcbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgcHJvZ3Jlc3MuaW5uZXJIVE1MID0gcHJvZ3Jlc3NUZXh0O1xufVxuXG5mdW5jdGlvbiByZW5kZXJPcHRpb25zKCkge1xuICBmb3JtUXVlc3Rpb25PcmRlci5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpLmZvckVhY2goaW5wdXQgPT4ge1xuICAgIGlmIChpbnB1dC5uYW1lID09PSAncXVlc3Rpb24tb3JkZXInKSB7XG4gICAgICBpbnB1dC5jaGVja2VkID0gb3B0aW9uc1N0b3JlLmdldE9yZGVyKCkgPT09IGlucHV0LnZhbHVlO1xuICAgIH1cbiAgfSk7XG5cbiAgZm9ybVNlbGVjdEV4ZXJjaXNlcy5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpLmZvckVhY2goaW5wdXQgPT4ge1xuICAgIGlmIChpbnB1dC5uYW1lLmluY2x1ZGVzKCdjaGVja2JveC1leGVyY2lzZScpKSB7XG4gICAgICBpbnB1dC5jaGVja2VkID0gISFvcHRpb25zU3RvcmUuZ2V0U2VsZWN0ZWRFeGVyY2lzZXMoKVtpbnB1dC5uYW1lXTtcbiAgICB9XG4gIH0pO1xuXG4gIGZvcm1TZWxlY3RNb2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3NlbGVjdCcpLmZvckVhY2goc2VsZWN0ID0+IHtcbiAgICBpZiAoc2VsZWN0Lm5hbWUuaW5jbHVkZXMoJ3NlbGVjdC1tb2RlJykpIHtcbiAgICAgIHNlbGVjdC52YWx1ZSA9IG9wdGlvbnNTdG9yZS5nZXRNb2RlKCk7XG4gICAgfVxuICB9KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gc25vb3plRHVyYXRpb25Nc1xuICovXG5mdW5jdGlvbiBzbm9vemVDdXJyZW50UXVlc3Rpb24oc25vb3plRHVyYXRpb25Ncywgc2hvdWxkUmVtb3ZlUHJvYmxlbSA9IHRydWUpIHtcbiAgY29uc3QgbnVtUHJvYmxlbXMgPSBzdGF0ZS5wcm9ibGVtcy5sZW5ndGhcbiAgaWYgKG51bVByb2JsZW1zID09PSAwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IGN1cnJlbnRJbmRleCA9IHN0YXRlLmluZGV4ICUgbnVtUHJvYmxlbXM7XG4gIGNvbnN0IGN1cnJlbnRQcm9ibGVtID0gc3RhdGUucHJvYmxlbXNbY3VycmVudEluZGV4XTtcbiAgaWYgKCFjdXJyZW50UHJvYmxlbSkgcmV0dXJuO1xuICBjb25zdCBoYXNoID0gY3VycmVudFByb2JsZW1bM10gfHwgXCJcIjtcbiAgY29uc3QgZGlkU25vb3plID0gcXVlc3Rpb25zU3RvcmUuc25vb3plUXVlc3Rpb24oaGFzaCwgc25vb3plRHVyYXRpb25Ncyk7XG4gIGlmIChkaWRTbm9vemUgJiYgc2hvdWxkUmVtb3ZlUHJvYmxlbSkge1xuICAgIHN0YXRlLnByb2JsZW1zID0gcmVtb3ZlQXJyYXlFbGVtZW50KHN0YXRlLnByb2JsZW1zLCBjdXJyZW50SW5kZXgpO1xuICAgIHN0YXRlLnJldmVhbGVkID0gZmFsc2U7XG4gIH1cbn1cblxuLyoqIEB0eXBlIHtudWxsIHwgKCgpID0+IHZvaWQpfSAqL1xubGV0IGNsZWFudXBIYXNoUHJvY2Vzc29yID0gbnVsbDtcblxuLyoqXG4gKiBIYXNoIFBvcnR1Z3Vlc2UgcGhyYXNlIHRvIGFsbG93IGZvciBcInNub296aW5nXCIgYSBmbGFzaCBjYXJkXG4gKi9cbmZ1bmN0aW9uIHByZXBhcmVIYXNoRGF0YShvblByb2Nlc3NpbmdDb21wbGV0ZSA9ICgpID0+IHt9KSB7XG4gIGlmIChjbGVhbnVwSGFzaFByb2Nlc3Nvcikge1xuICAgIGNsZWFudXBIYXNoUHJvY2Vzc29yKCk7XG4gIH1cblxuICBsZXQgaWdub3JlID0gZmFsc2U7XG5cbiAgYXN5bmMgZnVuY3Rpb24gcHJvY2VzcygpIHtcbiAgICBjb25zdCB0aW1lU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBsZXQgaSA9IDA7XG4gICAgd2hpbGUgKCFpZ25vcmUgJiYgaSA8IHN0YXRlLnByb2JsZW1zLmxlbmd0aCkge1xuICAgICAgY29uc3QgcHJvYmxlbSA9IHN0YXRlLnByb2JsZW1zW2ldO1xuICAgICAgaWYgKCFwcm9ibGVtKSBjb250aW51ZTtcbiAgICAgIGNvbnN0IHB0UGhyYXNlID0gU3RyaW5nKHByb2JsZW1bcHJvYmxlbVsyXV0pO1xuICAgICAgY29uc3QgaGFzaCA9IGF3YWl0IHNoYTI1NihwdFBocmFzZSk7XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICBzdGF0ZS5wcm9ibGVtc1tpXVszXSA9IGhhc2g7XG4gICAgICBMb2dnZXIuZGVidWcoYHByb2Nlc3NpbmcgbXNnICR7aX0gLSAke2hhc2h9IGdlbmVyYXRlZCBmb3IgXCIke3B0UGhyYXNlfVwiYClcbiAgICAgIGkrKztcbiAgICB9XG4gICAgaWYgKCFpZ25vcmUpIHtcbiAgICAgIGNvbnN0IHNub296ZWRRdWVzdGlvbnMgPSBxdWVzdGlvbnNTdG9yZS5nZXRTbm9vemVkUXVlc3Rpb25zKCk7XG4gICAgICBzdGF0ZS5wcm9ibGVtcyA9IHN0YXRlLnByb2JsZW1zLmZpbHRlcihwcm9ibGVtID0+IHtcbiAgICAgICAgY29uc3QgaGFzaCA9IHByb2JsZW1bM10gfHwgXCJcIjtcbiAgICAgICAgY29uc3QgY3VycmVudFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCB0aW1lU25vb3plRXhwaXJlc01zID0gc25vb3plZFF1ZXN0aW9uc1toYXNoXSB8fCAwO1xuICAgICAgICByZXR1cm4gISFoYXNoICYmIHRpbWVTbm9vemVFeHBpcmVzTXMgPCBjdXJyZW50VGltZVxuICAgICAgfSlcblxuICAgICAgY29uc3QgdGltZUVuZCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgTG9nZ2VyLmluZm8oYHByb2Nlc3NpbmcgY29tcGxldGUhIC0gdG9vayAke3RpbWVFbmQgLSB0aW1lU3RhcnR9bXNgKTtcbiAgICAgIG9uUHJvY2Vzc2luZ0NvbXBsZXRlKCk7XG4gICAgfVxuICB9XG5cbiAgcHJvY2VzcygpO1xuXG4gIGNsZWFudXBIYXNoUHJvY2Vzc29yID0gKCkgPT4ge1xuICAgIGlnbm9yZSA9IHRydWU7XG4gICAgY2xlYW51cEhhc2hQcm9jZXNzb3IgPSBudWxsO1xuICB9XG59XG5cbi8qKlxuICogQHJldHVybnMge1soKSA9PiB2b2lkLCAoKSA9PiB2b2lkXX1cbiAqL1xuZnVuY3Rpb24gcHJlcGFyZVNwZWFraW5nU3RhdHVzKCkge1xuICAvKiogQHR5cGUge05vZGVKUy5UaW1lb3V0IHwgbnVsbH0gKi9cbiAgbGV0IGludGVydmFsID0gbnVsbDtcbiAgY29uc3Qgc2hvd1NwZWFraW5nU3RhdHVzID0gKCkgPT4ge1xuICAgIGxldCBpID0gMDtcbiAgICBzcGVlY2hTdGF0dXMuaW5uZXJUZXh0ID0gJy4nO1xuICAgIGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgaSsrO1xuICAgICAgc3BlZWNoU3RhdHVzLmlubmVyVGV4dCA9ICgoKSA9PiB7XG4gICAgICAgIGlmIChpICUgMyA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiAnLic7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgJSAzID09PSAxKSB7XG4gICAgICAgICAgcmV0dXJuICcuLic7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICcuLi4nO1xuICAgICAgfSkoKVxuICAgIH0sIDUwMCk7XG4gIH1cbiAgY29uc3QgaGlkZVNwZWFraW5nU3RhdHVzID0gKCkgPT4ge1xuICAgIGlmIChpbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgfVxuICAgIHNwZWVjaFN0YXR1cy5pbm5lclRleHQgPSBcIlwiO1xuICB9O1xuICByZXR1cm4gW3Nob3dTcGVha2luZ1N0YXR1cywgaGlkZVNwZWFraW5nU3RhdHVzXTtcbn1cblxuZnVuY3Rpb24gY2VsZWJyYXRlKCkge1xuICBjb25zdCBzb3VuZHMgPSBbXG4gICAgJ3NmeC8xNjIzOTVfX3p1dDUwX195YXkubXAzJyxcbiAgICAnc2Z4LzIzOTU5NF9feHRyZ2Ftcl9fdW5pbXByZXNzZWR5YXlfMDEud2F2JyxcbiAgICAnc2Z4LzI1MjgwOF9feHRyZ2Ftcl9feWF5LndhdicsXG4gICAgJ3NmeC8zMjM3MDNfX3JlaXRhbm5hX19mdW5ueS15YXkud2F2JyxcbiAgICAnc2Z4LzM1MzkyM19fZHJfc2tpdHpfX3lheS53YXYnLFxuICBdXG4gIGNvbnN0IHNvdW5kID0gbmV3IEF1ZGlvKGdldFJhbmRvbUVsZW1lbnQoc291bmRzKSk7XG4gIHNvdW5kLnBsYXkoKTtcbn1cblxubWFpbigpO1xuIiwiXG4vKipcbiAqIEByZWFkb25seVxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IE9SREVSID0ge1xuICBQUl9GSVJTVDogJ3ByLWZpcnN0JyxcbiAgRU5fRklSU1Q6ICdlbi1maXJzdCcsXG4gIEFOWTogJ2FueScsXG59XG5cbi8qKlxuICogQHJlYWRvbmx5XG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgRVhFUkNJU0UgPSB7XG4gIFZFUl9DT05KQVRJT046ICdjaGVja2JveC1leGVyY2lzZS12ZXItY29uanVnYXRpb24nLFxuICBWSVJfQ09OSlVHQVRJT046ICdjaGVja2JveC1leGVyY2lzZS12aXItY29uanVnYXRpb24nLFxuICBWRVJfQU5EX1ZJUjogJ2NoZWNrYm94LWV4ZXJjaXNlLXZlci1hbmQtdmlyJyxcbiAgV0VBS19QSFJBU0VTOiAnY2hlY2tib3gtZXhlcmNpc2Utd2Vhay1waHJhc2VzJyxcbiAgVk9DQUI6ICdjaGVja2JveC1leGVyY2lzZS12b2NhYicsXG59XG5cbi8qKlxuICogUHJhY3RpY2UgbW9kZSAtIGUuZy4gcmVhZGluZyBvciBsaXN0ZW5pbmdcbiAqIEByZWFkb25seVxuICogQGVudW0ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IE1PREUgPSB7XG4gIFJFQURJTkc6ICdtb2RlLXJlYWRpbmcnLFxuICBMSVNURU5JTkc6ICdtb2RlLWxpc3RlbmluZycsXG59XG5cbi8qKiBAcmVhZG9ubHkgKi9cbmV4cG9ydCBjb25zdCBPTkVfSE9VUl9NUyA9IDYwICogNjAgKiAxMDAwO1xuIiwiXG5leHBvcnQgY29uc3QgU3BlY2lhbEtleSA9IHtcbiAgQmFja3NwYWNlOiAnYmFja3NwYWNlJyxcbiAgRXNjYXBlOiAnZXNjYXBlJyxcbiAgVGFiOiAndGFiJyxcbiAgU3BhY2U6ICdzcGFjZScsXG4gIEVudGVyOiAnZW50ZXInLFxuICBEZWxldGU6ICdkZWxldGUnLFxuICBBcnJvd1VwOiAnQXJyb3dVcCcsXG4gIEFycm93RG93bjogJ0Fycm93RG93bicsXG4gIEFycm93TGVmdDogJ0Fycm93TGVmdCcsXG4gIEFycm93UmlnaHQ6ICdBcnJvd1JpZ2h0Jyxcbn1cblxuLyoqXG4gKiBLZXlib2FyZCBvcHRpb25zXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBLZXlib2FyZE9wdGlvbnNcbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2N0cmxLZXldIC0gY29udHJvbCBrZXkgaXMgcHJlc3NlZC5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW3NoaWZ0S2V5XSAtIHNoaWZ0IGtleSBpcyBwcmVzc2VkLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbYWx0S2V5XSAtIGFsdCBrZXkgaXMgcHJlc3NlZC5cbiAqL1xuXG4vKipcbiAqIGRldGVybWluZSB3aGV0aGVyIGEgbnVtYmVyIGlzIHByZXNzZWRcbiAqIEBwYXJhbSB7S2V5Ym9hcmRFdmVudH0gZXYgXG4gKiBAcGFyYW0ge251bWJlcn0gbnVtIFxuICogQHBhcmFtIHtLZXlib2FyZE9wdGlvbnN9IFtvcHRzXVxuICogQHJldHVybnMgYm9vbGVhblxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNOdW1iZXJQcmVzc2VkKGV2LCBudW0sIG9wdHMgPSB7fSkge1xuICBpZiAoIWFyZU9wdGlvbnNTYXRpc2ZpZWQoZXYsIG9wdHMpKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiBmaW5kTnVtYmVyUHJlc3NlZChldikgPT09IG51bTtcbn1cblxuLyoqXG4gKiBkZXRlcm1pbmUgd2hldGhlciBhIGNoYXIgaXMgcHJlc3NlZFxuICogQHBhcmFtIHtLZXlib2FyZEV2ZW50fSBldiBcbiAqIEBwYXJhbSB7c3RyaW5nfSBjaGFyXG4gKiBAcGFyYW0ge0tleWJvYXJkT3B0aW9uc30gW29wdHNdXG4gKiBAcmV0dXJucyBib29sZWFuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0NoYXJQcmVzc2VkKGV2LCBjaGFyLCBvcHRzID0ge30pIHtcbiAgaWYgKCFhcmVPcHRpb25zU2F0aXNmaWVkKGV2LCBvcHRzKSkgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gZmluZENoYXJQcmVzc2VkKGV2KSA9PT0gY2hhcjtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgd2hldGhlciBvcHRpb25zIGFyZSBzYXRpc2ZpZWQgKGN0cmwsIGFsdCwgc2hpZnQsIGV0Yy4pXG4gKiBAcGFyYW0ge0tleWJvYXJkRXZlbnR9IGV2IFxuICogQHBhcmFtIHtLZXlib2FyZE9wdGlvbnN9IFtvcHRzXVxuICogQHJldHVybnMgYm9vbGVhblxuICovXG5mdW5jdGlvbiBhcmVPcHRpb25zU2F0aXNmaWVkKGV2LCBvcHRzID0ge30pIHtcbiAgaWYgKCFldikgcmV0dXJuIGZhbHNlO1xuICBjb25zdCBpc0NvbnRyb2xQcmVzc2VkID0gZXYubWV0YUtleSB8fCBldi5jdHJsS2V5OyAvLyBtZXRhIGtleSBpcyBDTUQga2V5IG9uIG1hY1xuICBjb25zdCBpc1NoaWZ0UHJlc3NlZCA9IGV2LnNoaWZ0S2V5O1xuICBjb25zdCBpc0FsdEtleVByZXNzZWQgPSBldi5hbHRLZXk7XG4gIGlmIChvcHRzLmN0cmxLZXkgJiYgIWlzQ29udHJvbFByZXNzZWQpIHJldHVybiBmYWxzZTtcbiAgaWYgKG9wdHMuc2hpZnRLZXkgJiYgIWlzU2hpZnRQcmVzc2VkKSByZXR1cm4gZmFsc2U7XG4gIGlmIChvcHRzLmFsdEtleSAmJiAhaXNBbHRLZXlQcmVzc2VkKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIEZpbmQgbnVtYmVyIHByZXNzZWQsIG9yIC0xIGlmIG5vIG1hdGNoIGZvdW5kXG4gKiBAcGFyYW0ge0tleWJvYXJkRXZlbnR9IGV2XG4gKiBAcmV0dXJucyBudW1iZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmROdW1iZXJQcmVzc2VkKGV2KSB7XG4gIGlmIChldi5rZXkgPT09ICcwJyB8fCBldi5jb2RlID09PSAnRGlnaXQwJyB8fCBldi5jb2RlID09PSAnTnVtcGFkMCcgfHwgZXYua2V5Q29kZSA9PT0gNDggfHwgZXYua2V5Q29kZSA9PT0gOTYpIHJldHVybiAwO1xuICBpZiAoZXYua2V5ID09PSAnMScgfHwgZXYuY29kZSA9PT0gJ0RpZ2l0MScgfHwgZXYuY29kZSA9PT0gJ051bXBhZDEnIHx8IGV2LmtleUNvZGUgPT09IDQ5IHx8IGV2LmtleUNvZGUgPT09IDk3KSByZXR1cm4gMTtcbiAgaWYgKGV2LmtleSA9PT0gJzInIHx8IGV2LmNvZGUgPT09ICdEaWdpdDInIHx8IGV2LmNvZGUgPT09ICdOdW1wYWQyJyB8fCBldi5rZXlDb2RlID09PSA1MCB8fCBldi5rZXlDb2RlID09PSA5OCkgcmV0dXJuIDI7XG4gIGlmIChldi5rZXkgPT09ICczJyB8fCBldi5jb2RlID09PSAnRGlnaXQzJyB8fCBldi5jb2RlID09PSAnTnVtcGFkMycgfHwgZXYua2V5Q29kZSA9PT0gNTEgfHwgZXYua2V5Q29kZSA9PT0gOTkpIHJldHVybiAzO1xuICBpZiAoZXYua2V5ID09PSAnNCcgfHwgZXYuY29kZSA9PT0gJ0RpZ2l0NCcgfHwgZXYuY29kZSA9PT0gJ051bXBhZDQnIHx8IGV2LmtleUNvZGUgPT09IDUyIHx8IGV2LmtleUNvZGUgPT09IDEwMCkgcmV0dXJuIDQ7XG4gIGlmIChldi5rZXkgPT09ICc1JyB8fCBldi5jb2RlID09PSAnRGlnaXQ1JyB8fCBldi5jb2RlID09PSAnTnVtcGFkNScgfHwgZXYua2V5Q29kZSA9PT0gNTMgfHwgZXYua2V5Q29kZSA9PT0gMTAxKSByZXR1cm4gNTtcbiAgaWYgKGV2LmtleSA9PT0gJzYnIHx8IGV2LmNvZGUgPT09ICdEaWdpdDYnIHx8IGV2LmNvZGUgPT09ICdOdW1wYWQ2JyB8fCBldi5rZXlDb2RlID09PSA1NCB8fCBldi5rZXlDb2RlID09PSAxMDIpIHJldHVybiA2O1xuICBpZiAoZXYua2V5ID09PSAnNycgfHwgZXYuY29kZSA9PT0gJ0RpZ2l0NycgfHwgZXYuY29kZSA9PT0gJ051bXBhZDcnIHx8IGV2LmtleUNvZGUgPT09IDU1IHx8IGV2LmtleUNvZGUgPT09IDEwMykgcmV0dXJuIDc7XG4gIGlmIChldi5rZXkgPT09ICc4JyB8fCBldi5jb2RlID09PSAnRGlnaXQ4JyB8fCBldi5jb2RlID09PSAnTnVtcGFkOCcgfHwgZXYua2V5Q29kZSA9PT0gNTYgfHwgZXYua2V5Q29kZSA9PT0gMTA0KSByZXR1cm4gODtcbiAgaWYgKGV2LmtleSA9PT0gJzknIHx8IGV2LmNvZGUgPT09ICdEaWdpdDknIHx8IGV2LmNvZGUgPT09ICdOdW1wYWQ5JyB8fCBldi5rZXlDb2RlID09PSA1NyB8fCBldi5rZXlDb2RlID09PSAxMDUpIHJldHVybiA5O1xuICByZXR1cm4gLTE7XG59XG5cbi8qKlxuICogRmluZCBjaGFyIHByZXNzZWQsIG9yIFwiXCIgaWYgbm8gbWF0Y2ggZm91bmRcbiAqIEBwYXJhbSB7S2V5Ym9hcmRFdmVudH0gZXZcbiAqIEByZXR1cm5zIHN0cmluZ1xuICovXG5mdW5jdGlvbiBmaW5kQ2hhclByZXNzZWQoZXYpIHtcbiAgY29uc3QgbnVtID0gZmluZE51bWJlclByZXNzZWQoZXYpO1xuICBpZiAobnVtICE9PSAtMSkgcmV0dXJuIFN0cmluZyhudW0pO1xuICBpZiAoZXYua2V5ID09PSAnYScgfHwgZXYuY29kZSA9PT0gJ0tleUEnIHx8IGV2LmtleUNvZGUgPT09IDY1KSByZXR1cm4gJ2EnO1xuICBpZiAoZXYua2V5ID09PSAnYicgfHwgZXYuY29kZSA9PT0gJ0tleUInIHx8IGV2LmtleUNvZGUgPT09IDY2KSByZXR1cm4gJ2InO1xuICBpZiAoZXYua2V5ID09PSAnYycgfHwgZXYuY29kZSA9PT0gJ0tleUMnIHx8IGV2LmtleUNvZGUgPT09IDY3KSByZXR1cm4gJ2MnO1xuICBpZiAoZXYua2V5ID09PSAnZCcgfHwgZXYuY29kZSA9PT0gJ0tleUQnIHx8IGV2LmtleUNvZGUgPT09IDY4KSByZXR1cm4gJ2QnO1xuICBpZiAoZXYua2V5ID09PSAnZScgfHwgZXYuY29kZSA9PT0gJ0tleUUnIHx8IGV2LmtleUNvZGUgPT09IDY5KSByZXR1cm4gJ2UnO1xuICBpZiAoZXYua2V5ID09PSAnZicgfHwgZXYuY29kZSA9PT0gJ0tleUYnIHx8IGV2LmtleUNvZGUgPT09IDcwKSByZXR1cm4gJ2YnO1xuICBpZiAoZXYua2V5ID09PSAnZycgfHwgZXYuY29kZSA9PT0gJ0tleUcnIHx8IGV2LmtleUNvZGUgPT09IDcxKSByZXR1cm4gJ2cnO1xuICBpZiAoZXYua2V5ID09PSAnaCcgfHwgZXYuY29kZSA9PT0gJ0tleUgnIHx8IGV2LmtleUNvZGUgPT09IDcyKSByZXR1cm4gJ2gnO1xuICBpZiAoZXYua2V5ID09PSAnaScgfHwgZXYuY29kZSA9PT0gJ0tleUknIHx8IGV2LmtleUNvZGUgPT09IDczKSByZXR1cm4gJ2knO1xuICBpZiAoZXYua2V5ID09PSAnaicgfHwgZXYuY29kZSA9PT0gJ0tleUonIHx8IGV2LmtleUNvZGUgPT09IDc0KSByZXR1cm4gJ2onO1xuICBpZiAoZXYua2V5ID09PSAnaycgfHwgZXYuY29kZSA9PT0gJ0tleUsnIHx8IGV2LmtleUNvZGUgPT09IDc1KSByZXR1cm4gJ2snO1xuICBpZiAoZXYua2V5ID09PSAnbCcgfHwgZXYuY29kZSA9PT0gJ0tleUwnIHx8IGV2LmtleUNvZGUgPT09IDc2KSByZXR1cm4gJ2wnO1xuICBpZiAoZXYua2V5ID09PSAnbScgfHwgZXYuY29kZSA9PT0gJ0tleU0nIHx8IGV2LmtleUNvZGUgPT09IDc3KSByZXR1cm4gJ20nO1xuICBpZiAoZXYua2V5ID09PSAnbicgfHwgZXYuY29kZSA9PT0gJ0tleU4nIHx8IGV2LmtleUNvZGUgPT09IDc4KSByZXR1cm4gJ24nO1xuICBpZiAoZXYua2V5ID09PSAnbycgfHwgZXYuY29kZSA9PT0gJ0tleU8nIHx8IGV2LmtleUNvZGUgPT09IDc5KSByZXR1cm4gJ28nO1xuICBpZiAoZXYua2V5ID09PSAncCcgfHwgZXYuY29kZSA9PT0gJ0tleVAnIHx8IGV2LmtleUNvZGUgPT09IDgwKSByZXR1cm4gJ3AnO1xuICBpZiAoZXYua2V5ID09PSAncScgfHwgZXYuY29kZSA9PT0gJ0tleVEnIHx8IGV2LmtleUNvZGUgPT09IDgxKSByZXR1cm4gJ3EnO1xuICBpZiAoZXYua2V5ID09PSAncicgfHwgZXYuY29kZSA9PT0gJ0tleVInIHx8IGV2LmtleUNvZGUgPT09IDgyKSByZXR1cm4gJ3InO1xuICBpZiAoZXYua2V5ID09PSAncycgfHwgZXYuY29kZSA9PT0gJ0tleVMnIHx8IGV2LmtleUNvZGUgPT09IDgzKSByZXR1cm4gJ3MnO1xuICBpZiAoZXYua2V5ID09PSAndCcgfHwgZXYuY29kZSA9PT0gJ0tleVQnIHx8IGV2LmtleUNvZGUgPT09IDg0KSByZXR1cm4gJ3QnO1xuICBpZiAoZXYua2V5ID09PSAndScgfHwgZXYuY29kZSA9PT0gJ0tleVUnIHx8IGV2LmtleUNvZGUgPT09IDg1KSByZXR1cm4gJ3UnO1xuICBpZiAoZXYua2V5ID09PSAndicgfHwgZXYuY29kZSA9PT0gJ0tleVYnIHx8IGV2LmtleUNvZGUgPT09IDg2KSByZXR1cm4gJ3YnO1xuICBpZiAoZXYua2V5ID09PSAndycgfHwgZXYuY29kZSA9PT0gJ0tleVcnIHx8IGV2LmtleUNvZGUgPT09IDg3KSByZXR1cm4gJ3cnO1xuICBpZiAoZXYua2V5ID09PSAneCcgfHwgZXYuY29kZSA9PT0gJ0tleVgnIHx8IGV2LmtleUNvZGUgPT09IDg4KSByZXR1cm4gJ3gnO1xuICBpZiAoZXYua2V5ID09PSAneScgfHwgZXYuY29kZSA9PT0gJ0tleVknIHx8IGV2LmtleUNvZGUgPT09IDg5KSByZXR1cm4gJ3knO1xuICBpZiAoZXYua2V5ID09PSAneicgfHwgZXYuY29kZSA9PT0gJ0tleVonIHx8IGV2LmtleUNvZGUgPT09IDkwKSByZXR1cm4gJ3onO1xuICBpZiAoZXYua2V5ID09PSAnYCcgfHwgZXYuY29kZSA9PT0gJ0JhY2txdW90ZScgfHwgZXYua2V5Q29kZSA9PT0gMTkyKSByZXR1cm4gJ2AnO1xuICBpZiAoZXYua2V5ID09PSAnLScgfHwgZXYuY29kZSA9PT0gJ01pbnVzJyB8fCBldi5rZXlDb2RlID09PSAxODkpIHJldHVybiAnLSc7XG4gIGlmIChldi5rZXkgPT09ICc9JyB8fCBldi5jb2RlID09PSAnRXF1YWxzJyB8fCBldi5rZXlDb2RlID09PSAxODcpIHJldHVybiAnPSc7XG4gIGlmIChldi5rZXkgPT09ICctJyB8fCBldi5jb2RlID09PSAnTnVtcGFkU3VidHJhY3QnIHx8IGV2LmtleUNvZGUgPT09IDEwOSkgcmV0dXJuICctJztcbiAgaWYgKGV2LmtleSA9PT0gJysnIHx8IGV2LmNvZGUgPT09ICdOdW1wYWRBZGQnIHx8IGV2LmtleUNvZGUgPT09IDEwNykgcmV0dXJuICcrJztcbiAgaWYgKGV2LmtleSA9PT0gJ1snIHx8IGV2LmNvZGUgPT09ICdCcmFja2V0TGVmdCcgfHwgZXYua2V5Q29kZSA9PT0gMjE5KSByZXR1cm4gJ1snO1xuICBpZiAoZXYua2V5ID09PSAnXScgfHwgZXYuY29kZSA9PT0gJ0JyYWNrZXRSaWdodCcgfHwgZXYua2V5Q29kZSA9PT0gMjIxKSByZXR1cm4gJ10nO1xuICBpZiAoZXYua2V5ID09PSAnQmFja3NwYWNlJyB8fCBldi5jb2RlID09PSAnQmFja3NwYWNlJyB8fCBldi5rZXlDb2RlID09PSAyMjEpIHJldHVybiBTcGVjaWFsS2V5LkJhY2tzcGFjZTtcbiAgaWYgKGV2LmtleSA9PT0gJ0VzY2FwZScgfHwgZXYuY29kZSA9PT0gJ0VzY2FwZScgfHwgZXYua2V5Q29kZSA9PT0gMjcpIHJldHVybiBTcGVjaWFsS2V5LkVzY2FwZTtcbiAgaWYgKGV2LmtleSA9PT0gJyAnIHx8IGV2LmNvZGUgPT09ICdTcGFjZScgfHwgZXYua2V5Q29kZSA9PT0gMzIpIHJldHVybiBTcGVjaWFsS2V5LlNwYWNlO1xuICBpZiAoZXYua2V5ID09PSAnRW50ZXInIHx8IGV2LmNvZGUgPT09ICdFbnRlcicgfHwgZXYuY29kZSA9PT0gJ051bXBhZEVudGVyJyB8fCBldi5rZXlDb2RlID09PSAxMykgcmV0dXJuIFNwZWNpYWxLZXkuRW50ZXI7XG4gIGlmIChldi5rZXkgPT09ICdEZWxldGUnIHx8IGV2LmNvZGUgPT09ICdEZWxldGUnIHx8IGV2LmtleUNvZGUgPT09IDQ2KSByZXR1cm4gU3BlY2lhbEtleS5EZWxldGU7XG4gIGlmIChldi5rZXkgPT09ICdBcnJvd1VwJyB8fCBldi5jb2RlID09PSAnQXJyb3dVcCcgfHwgZXYua2V5Q29kZSA9PT0gMzgpIHJldHVybiBTcGVjaWFsS2V5LkFycm93VXA7XG4gIGlmIChldi5rZXkgPT09ICdBcnJvd0Rvd24nIHx8IGV2LmNvZGUgPT09ICdBcnJvd0Rvd24nIHx8IGV2LmtleUNvZGUgPT09IDQwKSByZXR1cm4gU3BlY2lhbEtleS5BcnJvd0Rvd247XG4gIGlmIChldi5rZXkgPT09ICdBcnJvd0xlZnQnIHx8IGV2LmNvZGUgPT09ICdBcnJvd0xlZnQnIHx8IGV2LmtleUNvZGUgPT09IDM3KSByZXR1cm4gU3BlY2lhbEtleS5BcnJvd0xlZnQ7XG4gIGlmIChldi5rZXkgPT09ICdBcnJvd1JpZ2h0JyB8fCBldi5jb2RlID09PSAnQXJyb3dSaWdodCcgfHwgZXYua2V5Q29kZSA9PT0gMzkpIHJldHVybiBTcGVjaWFsS2V5LkFycm93UmlnaHQ7XG4gIHJldHVybiAnJ1xufVxuIiwiaW1wb3J0IHsgcmVxdWlyZUJ5SWQgfSBmcm9tICcuL3V0aWxzJztcblxuY29uc3Qgc3ludGggPSB3aW5kb3cuc3BlZWNoU3ludGhlc2lzO1xuXG4vKiogQHR5cGUge0hUTUxTZWxlY3RFbGVtZW50fSAqL1xuLy8gQHRzLWlnbm9yZVxuY29uc3Qgc2VsZWN0Vm9pY2UgPSByZXF1aXJlQnlJZChcInNlbGVjdC12b2ljZVwiKVxuXG4vKiogQHR5cGUge1NwZWVjaFN5bnRoZXNpc1ZvaWNlW119ICovXG5sZXQgdm9pY2VzID0gW107XG5cbmZ1bmN0aW9uIGxvYWRWb2ljZXMoKSB7XG4gIC8vIG5vdGUgdGhhdCBpbiBzb21lIGJyb3dzZXJzLCBsb2FkVm9pY2VzKCkgbXVzdCBvY2N1ciBhZnRlciB1c2VyIGludGVyYWN0aW9uLi4uXG4gIHZvaWNlcyA9IHN5bnRoLmdldFZvaWNlcygpO1xuICBpZiAoIXZvaWNlcy5sZW5ndGgpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgZm9yIChjb25zdCBjaGlsZCBvZiBzZWxlY3RWb2ljZS5jaGlsZHJlbikge1xuICAgIGNoaWxkLnJlbW92ZSgpO1xuICB9XG4gIGxldCBjaG9zZW5Wb2ljZUluZGV4ID0gMDtcbiAgbGV0IGJhY2t1cFZvaWNlSW5kZXggPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHZvaWNlcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHZvaWNlID0gdm9pY2VzW2ldO1xuICAgIGlmICghdm9pY2UpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoIS9ecHQtLy50ZXN0KHZvaWNlLmxhbmcpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICBvcHRpb24udGV4dENvbnRlbnQgPSBgJHt2b2ljZS5uYW1lfSAoJHt2b2ljZS5sYW5nfSlgO1xuICAgIG9wdGlvbi52YWx1ZSA9IFN0cmluZyhpKTtcbiAgICBzZWxlY3RWb2ljZS5hcHBlbmRDaGlsZChvcHRpb24pO1xuICAgIGlmICghY2hvc2VuVm9pY2VJbmRleCAmJiB2b2ljZS5sYW5nID09PSAncHQtQlInICYmIHZvaWNlLm5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZ29vZ2xlJykpIHtcbiAgICAgIGNob3NlblZvaWNlSW5kZXggPSBpO1xuICAgIH1cbiAgICBpZiAoIWJhY2t1cFZvaWNlSW5kZXggICYmIHZvaWNlLmxhbmcgPT09ICdwdC1CUicpIHtcbiAgICAgIGJhY2t1cFZvaWNlSW5kZXggPSBpO1xuICAgIH1cbiAgfVxuICBzZWxlY3RWb2ljZS52YWx1ZSA9IFN0cmluZyhjaG9zZW5Wb2ljZUluZGV4IHx8IGJhY2t1cFZvaWNlSW5kZXgpO1xufVxuXG4vLyBpbiBHb29nbGUgQ2hyb21lIHRoZSB2b2ljZXMgYXJlIG5vdCByZWFkeSBvbiBwYWdlIGxvYWRcbmlmIChcIm9udm9pY2VzY2hhbmdlZFwiIGluIHN5bnRoKSB7XG4gIHN5bnRoLm9udm9pY2VzY2hhbmdlZCA9IGxvYWRWb2ljZXM7XG59IGVsc2Uge1xuICBsb2FkVm9pY2VzKCk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHRleHRcbiAqIEBwYXJhbSB7KCgpID0+IHZvaWQpIHwgdW5kZWZpbmVkfSBvbkZpbmlzaGVkXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGNvbnN0IHNwZWFrID0gKHRleHQsIG9uRmluaXNoZWQgPSB1bmRlZmluZWQpID0+IHtcbiAgaWYgKHN5bnRoLnNwZWFraW5nKSByZXR1cm4gZmFsc2U7XG4gIGlmICghdm9pY2VzLmxlbmd0aCkgbG9hZFZvaWNlcygtMSk7XG4gIGNvbnN0IGZpbHRlcmVkID0gdGV4dC5yZXBsYWNlKC9cXCpcXCovZywgJycpO1xuICBjb25zdCB1dHRlcmFuY2UgPSBuZXcgU3BlZWNoU3ludGhlc2lzVXR0ZXJhbmNlKGZpbHRlcmVkKTtcbiAgY29uc3Qgdm9pY2UgPSB2b2ljZXNbcGFyc2VJbnQoc2VsZWN0Vm9pY2UudmFsdWUsIDEwKV07XG4gIGlmICghdm9pY2UpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdXR0ZXJhbmNlLnZvaWNlID0gdm9pY2U7XG4gIHN5bnRoLnNwZWFrKHV0dGVyYW5jZSk7XG4gIGlmIChvbkZpbmlzaGVkKSB7XG4gICAgdXR0ZXJhbmNlLm9uZW5kID0gb25GaW5pc2hlZDtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cbiIsIlxuZXhwb3J0IGNsYXNzIEJhc2VTdG9yZSB7XG4gIGdldCBrZXkoKSB7IHJldHVybiBcIlwiOyB9IC8vIGFic3RyYWN0XG5cbiAgY2xlYXJTdG9yZSA9ICgpID0+IHtcbiAgICB0aGlzLl92YWxpZGF0ZSgpO1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHRoaXMua2V5KTtcbiAgfVxuXG4gIGdldFN0b3JlID0gKCkgPT4ge1xuICAgIHRoaXMuX3ZhbGlkYXRlKCk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGl0ZW1SYXcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLmtleSk7XG4gICAgICBpZiAoIWl0ZW1SYXcpIHJldHVybiBudWxsO1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UoaXRlbVJhdylcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUud2FybihlcnIpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZVxuICAgKi9cbiAgc2V0U3RvcmUgPSAodmFsdWUpID0+IHtcbiAgICB0aGlzLl92YWxpZGF0ZSgpO1xuICAgIHRyeSB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLmtleSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS53YXJuKGVycik7XG4gICAgfVxuICB9XG5cbiAgX3ZhbGlkYXRlID0gKCkgPT4ge1xuICAgIGlmICghdGhpcy5rZXkpIHRocm93IG5ldyBFcnJvcignbG9jYWwgc3RvcmFnZSBrZXkgaXMgcmVxdWlyZWQnKTtcbiAgfVxufSIsImltcG9ydCB7IEJhc2VTdG9yZSB9IGZyb20gXCIuL0Jhc2VTdG9yZVwiO1xuaW1wb3J0IHsgRVhFUkNJU0UsIE1PREUsIE9SREVSIH0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuXG5jbGFzcyBPcHRpb25zU3RvcmUgZXh0ZW5kcyBCYXNlU3RvcmUge1xuICAvKiogQG92ZXJyaWRlICovXG4gIGdldCBrZXkoKSB7XG4gICAgcmV0dXJuIFwicHQtb3B0aW9uc1wiXG4gIH1cblxuICBfZGVmYXVsdFZhbHVlID0ge1xuICAgIG9yZGVyOiBPUkRFUi5BTlksXG4gICAgc2VsZWN0ZWRFeGVyY2lzZXM6IHtcbiAgICAgIFtFWEVSQ0lTRS5WRVJfQ09OSkFUSU9OXTogdHJ1ZSxcbiAgICAgIFtFWEVSQ0lTRS5WSVJfQ09OSlVHQVRJT05dOiB0cnVlLFxuICAgICAgW0VYRVJDSVNFLlZFUl9BTkRfVklSXTogdHJ1ZSxcbiAgICAgIFtFWEVSQ0lTRS5XRUFLX1BIUkFTRVNdOiB0cnVlLFxuICAgICAgW0VYRVJDSVNFLlZPQ0FCXTogdHJ1ZSxcbiAgICB9LFxuICAgIG1vZGU6IE1PREUuUkVBRElORyxcbiAgfTtcblxuICBfc3RhdGUgPSAoKCkgPT4ge1xuICAgIGNvbnN0IHN0b3JlZCA9IHRoaXMuZ2V0U3RvcmUoKVxuICAgIGlmICghc3RvcmVkKSB7XG4gICAgICByZXR1cm4geyAuLi50aGlzLl9kZWZhdWx0VmFsdWUgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgLi4udGhpcy5fZGVmYXVsdFZhbHVlLFxuICAgICAgLi4uc3RvcmVkLFxuICAgIH1cbiAgfSkoKTtcblxuICAvKipcbiAgICogQHJldHVybnMge09SREVSfVxuICAgKi9cbiAgZ2V0T3JkZXIgPSAoKSA9PiB0aGlzLl9zdGF0ZS5vcmRlcjtcblxuICAvKipcbiAgICogQHBhcmFtIHtPUkRFUn0gdmFsXG4gICAqL1xuICBzZXRPcmRlciA9ICh2YWwpID0+IHtcbiAgICB0aGlzLl9zdGF0ZS5vcmRlciA9IHZhbDtcbiAgICB0aGlzLnNldFN0b3JlKHRoaXMuX3N0YXRlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7UmVjb3JkPEVYRVJDSVNFLCBib29sZWFuPn1cbiAgICovXG4gIGdldFNlbGVjdGVkRXhlcmNpc2VzID0gKCkgPT4gKHtcbiAgICAuLi50aGlzLl9kZWZhdWx0VmFsdWUuc2VsZWN0ZWRFeGVyY2lzZXMsXG4gICAgLi4udGhpcy5fc3RhdGUuc2VsZWN0ZWRFeGVyY2lzZXMsXG4gIH0pO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXhlcmNpc2VcbiAgICogQHBhcmFtIHtib29sZWFufSBpc1NlbGVjdGVkXG4gICAqL1xuICBzZXRTZWxlY3RlZEV4ZXJjaXNlID0gKGV4ZXJjaXNlLCBpc1NlbGVjdGVkKSA9PiB7XG4gICAgdGhpcy5fc3RhdGUuc2VsZWN0ZWRFeGVyY2lzZXNbZXhlcmNpc2VdID0gaXNTZWxlY3RlZDtcbiAgICB0aGlzLnNldFN0b3JlKHRoaXMuX3N0YXRlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyB7TU9ERX1cbiAgICovXG4gIGdldE1vZGUgPSAoKSA9PiB0aGlzLl9zdGF0ZS5tb2RlO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge01PREV9IG1vZGVcbiAgICovXG4gIHNldE1vZGUgPSAobW9kZSkgPT4ge1xuICAgIHRoaXMuX3N0YXRlLm1vZGUgPSBtb2RlO1xuICAgIHRoaXMuc2V0U3RvcmUodGhpcy5fc3RhdGUpO1xuICB9XG5cbiAgcmVzZXQgPSAoKSA9PiB7XG4gICAgdGhpcy5jbGVhclN0b3JlKCk7XG4gICAgdGhpcy5fc3RhdGUgPSB7IC4uLnRoaXMuX2RlZmF1bHRWYWx1ZSB9O1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBvcHRpb25zU3RvcmUgPSBuZXcgT3B0aW9uc1N0b3JlKCk7XG4iLCJpbXBvcnQgeyBCYXNlU3RvcmUgfSBmcm9tIFwiLi9CYXNlU3RvcmVcIjtcblxuY2xhc3MgUXVlc3Rpb25zU3RvcmUgZXh0ZW5kcyBCYXNlU3RvcmUge1xuICAvKiogQG92ZXJyaWRlICovXG4gIGdldCBrZXkoKSB7XG4gICAgcmV0dXJuIFwicHQtcXVlc3Rpb25zXCJcbiAgfVxuXG4gIC8qKlxuICAgKiBTbm9vemVkID0ga2V5LXZhbHVlIHBhaXJzIG9mIGhhc2hlZCBwb3J0dWd1ZXNlIHBocmFzZSAoc2hhMjU2KSwgYW5kIHRpbWVTbm9vemVFeHBpcmVzTXNcbiAgICogYGBgc25vb3plZDogUmVjb3JkPHN0cmluZywgbnVtYmVyPmBgYFxuICAgKi9cbiAgX2RlZmF1bHRWYWx1ZSA9IHtcbiAgICBzbm9vemVkOiB7fSxcbiAgfTtcblxuICBfc3RhdGUgPSB0aGlzLmdldFN0b3JlKCkgfHwgeyAuLi50aGlzLl9kZWZhdWx0VmFsdWUgfTtcblxuICBnZXRTbm9vemVkUXVlc3Rpb25zID0gKCkgPT4gKHsgLi4udGhpcy5fc3RhdGUuc25vb3plZCB9KTtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGhhc2hcbiAgICogQHBhcmFtIHtudW1iZXJ9IHNub296ZUR1cmF0aW9uTXNcbiAgICovXG4gIHNub296ZVF1ZXN0aW9uID0gKGhhc2gsIHNub296ZUR1cmF0aW9uTXMpID0+IHtcbiAgICBpZiAoIWhhc2gpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCB0aW1lU25vb3plRXhwaXJlc01zID0gbm93ICsgc25vb3plRHVyYXRpb25NcztcbiAgICB0aGlzLl9zdGF0ZS5zbm9vemVkW2hhc2hdID0gdGltZVNub296ZUV4cGlyZXNNcztcbiAgICB0aGlzLnNldFN0b3JlKHRoaXMuX3N0YXRlKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHVuc25vb3plQWxsUXVlc3Rpb25zID0gKCkgPT4ge1xuICAgIHRoaXMuX3N0YXRlLnNub296ZWQgPSB7fTtcbiAgICB0aGlzLnNldFN0b3JlKHRoaXMuX3N0YXRlKTtcbiAgfVxuXG4gIHJlc2V0ID0gKCkgPT4ge1xuICAgIHRoaXMuY2xlYXJTdG9yZSgpO1xuICAgIHRoaXMuX3N0YXRlID0geyAuLi50aGlzLl9kZWZhdWx0VmFsdWUgfTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgcXVlc3Rpb25zU3RvcmUgPSBuZXcgUXVlc3Rpb25zU3RvcmUoKTtcblxuIiwiXG4vKipcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge0FycmF5LjxUPn0gYXJyYXlcbiAqIEByZXR1cm5zIHtBcnJheS48VD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaHVmZmxlQXJyYXkoYXJyYXkpIHtcbiAgLyoqIEB0eXBlIHtBcnJheS48VD59ICovXG4gIGNvbnN0IGNvcHkgPSBhcnJheS5zbGljZSgpXG4gIGZvciAobGV0IGkgPSBjb3B5Lmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcbiAgICBjb25zdCBqID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKGkgKyAxKSk7XG4gICAgY29uc3QgdGVtcCA9IGNvcHlbaV07XG4gICAgaWYgKCF0ZW1wKSBjb250aW51ZTtcbiAgICBpZiAoIWNvcHlbal0pIGNvbnRpbnVlO1xuICAgIGNvcHlbaV0gPSBjb3B5W2pdO1xuICAgIGNvcHlbal0gPSB0ZW1wO1xuICB9XG4gIHJldHVybiBjb3B5O1xufVxuXG4vKipcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge0FycmF5LjxUPn0gYXJyXG4gKiBAcmV0dXJucyB7VH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFJhbmRvbUVsZW1lbnQoYXJyKSB7XG4gIGNvbnN0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXJyLmxlbmd0aCk7XG4gIGNvbnN0IGVsZW0gPSBhcnJbcmFuZG9tSW5kZXhdO1xuICBpZiAoIWVsZW0pIHRocm93IG5ldyBFcnJvcignc29tZXRoaW5nIHdlbnQgdGVycmlibHkgd3JvbmcnKTtcbiAgcmV0dXJuIGVsZW07XG59XG5cbi8qKlxuICogQHBhcmFtIHthbnl8KCgpID0+IGJvb2xlYW4pfSBjb25kaXRpb25cbiAqIEBwYXJhbSB7P3N0cmluZ30gb3B0VGV4dFxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0KGNvbmRpdGlvbiwgb3B0VGV4dCkge1xuICBjb25zdCByZXN1bHQgPSB0eXBlb2YgY29uZGl0aW9uID09PSAnZnVuY3Rpb24nID8gY29uZGl0aW9uKCkgOiBjb25kaXRpb25cbiAgaWYgKCFyZXN1bHQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3Iob3B0VGV4dCB8fCAnQXNzZXJ0aW9uIEZhaWxlZCEnKTtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogQHJldHVybnMge0hUTUxFbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVxdWlyZUJ5SWQoaWQpIHtcbiAgY29uc3QgZWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbiAgaWYgKCFlbGVtKSB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBmaW5kIERPTSBlbGVtZW50IHdpdGggaWQgXCIke2lkfVwiISFgKTtcbiAgcmV0dXJuIGVsZW07XG59XG5cbi8qKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gbm9kZVxuICogQHJldHVybnMge0VsZW1lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXF1aXJlRmlyc3RDaGlsZChub2RlKSB7XG4gIGNvbnN0IGVsZW0gPSBub2RlLmNoaWxkcmVuWzBdXG4gIGlmICghZWxlbSkgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZ2V0IGNoaWxkIGZyb20gRE9NIGVsZW1lbnQgJHtub2RlfWApXG4gIHJldHVybiBlbGVtO1xufVxuXG4vKipcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge0FycmF5LjxUPn0gaXRlbXNcbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleFxuICogQHJldHVybnMge0FycmF5LjxUPn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUFycmF5RWxlbWVudChpdGVtcywgaW5kZXggPSAtMSkge1xuICBpZiAoaW5kZXggPCAwKSByZXR1cm4gaXRlbXM7XG4gIGlmIChpbmRleCA+PSBpdGVtcy5sZW5ndGgpIHJldHVybiBpdGVtcztcbiAgcmV0dXJuIGl0ZW1zLnNsaWNlKDAsIGluZGV4KS5jb25jYXQoaXRlbXMuc2xpY2UoaW5kZXggKyAxKSlcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNoYTI1NihtZXNzYWdlID0gJycpIHtcbiAgY29uc3QgbXNnVWludDggPSBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUobWVzc2FnZSk7IC8vIGVuY29kZSBhcyAodXRmLTgpIFVpbnQ4QXJyYXlcbiAgY29uc3QgaGFzaEJ1ZmZlciA9IGF3YWl0IHdpbmRvdy5jcnlwdG8uc3VidGxlLmRpZ2VzdChcIlNIQS0yNTZcIiwgbXNnVWludDgpOyAvLyBoYXNoIHRoZSBtZXNzYWdlXG4gIGNvbnN0IGhhc2hBcnJheSA9IEFycmF5LmZyb20obmV3IFVpbnQ4QXJyYXkoaGFzaEJ1ZmZlcikpOyAvLyBjb252ZXJ0IGJ1ZmZlciB0byBieXRlIGFycmF5XG4gIGNvbnN0IGhhc2hIZXggPSBoYXNoQXJyYXlcbiAgICAubWFwKChiKSA9PiBiLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCBcIjBcIikpXG4gICAgLmpvaW4oXCJcIik7IC8vIGNvbnZlcnQgYnl0ZXMgdG8gaGV4IHN0cmluZ1xuICByZXR1cm4gaGFzaEhleDtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICogQHJldHVybnMgc3RyaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXJraWZ5VGV4dCh0ZXh0KSB7XG4gIC8vIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IvZXBabzZNLzFcbiAgY29uc3QgcmVnQm9sZCA9IC8oPzwhXFxTKVxcKlxcKiguKz8pXFwqXFwqKD8hXFwqKSg/IVxcUykvZ1xuICAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL25rWUZwcC8xXG4gIGNvbnN0IHJlZ0VtID0gLyg/PCFcXFMpXFxfKC4rPylcXF8oPyFcXFMpL2dcbiAgY29uc3QgbmV3bGluZSA9IC9cXHMqXFxcXG5cXHMqL2c7XG4gIHJldHVybiB0ZXh0XG4gICAgLnJlcGxhY2UocmVnQm9sZCwgXCI8c3Ryb25nIGNsYXNzPVxcXCJhY2NlbnRcXFwiPiQxPC9zdHJvbmc+XCIpXG4gICAgLnJlcGxhY2UocmVnRW0sIFwiPGVtIGNsYXNzPVxcXCJzdWJ0bGVcXFwiPiQxPC9lbT5cIilcbiAgICAucmVwbGFjZShuZXdsaW5lLCBcIjxici8+XCIpXG59XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImltcG9ydCAnLi9hcHAnXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=